<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:walla="clr-namespace:ManageWalla"
    xmlns:gif="http://wpfanimatedgif.codeplex.com"
    xmlns:ShaderEffectLibrary="clr-namespace:ShaderEffectLibrary;assembly=ShaderEffectLibrary"
    x:Name="mainTwo" x:Class="ManageWalla.MainTwo"
    Title="fotowalla" FontFamily="Browallia New"  Closing="mainTwo_Closing" Loaded="mainTwo_Loaded" 
    SizeChanged="mainTwo_SizeChanged" FontSize="18" TextOptions.TextFormattingMode="Display" Height="731" Width="968">

    <!-- gif:ImageBehavior.AnimatedSource="{DynamicResource busyImageAnimSrc}" -->

    <Window.Resources>
        <CollectionViewSource x:Key="uploadImageStateListInProgressKey" 
                              Source="{StaticResource uploadImageStateListKey}"
                              Filter="UploadImageStateInProgress_Filter" IsLiveFilteringRequested="True" />

        <CollectionViewSource x:Key="uploadImageStateListCompleteKey"
                              Source="{StaticResource uploadImageStateListKey}"
                              Filter="UploadImageStateComplete_Filter" IsLiveFilteringRequested="True" />
    </Window.Resources>

    <Grid>
        <Grid x:Name="gridLeft" Margin="5,15,2,5" Background="{StaticResource BackgroundBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height="60" />
                <RowDefinition Height="50" />
                <RowDefinition Height="*"/>
                <RowDefinition Height="50" />
                <RowDefinition Height="0"/>
                <RowDefinition Height="50" />
                <RowDefinition Height="0"/>
                <RowDefinition Height="50" />
                <RowDefinition Height="0"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="40" />
                <ColumnDefinition Width="300" />
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="0"/>
            </Grid.ColumnDefinitions>

            <DockPanel Grid.Column="0" Grid.Row="0" Grid.RowSpan="9" Margin="2,2,2,2" Background="{StaticResource WallaBannerBackgroundBrush}" LastChildFill="True">
                <!-- <Button x:Name="cmdExpand" DockPanel.Dock="Top" Margin="2,3,2,2" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdExpand_Click" Padding="0">
                    <Button.Content>
                        <Image Source="{StaticResource expandImageSrc}" Height="28" />
                    </Button.Content>
                </Button>-->

                <Button x:Name="cmdExpand" Margin="2" DockPanel.Dock="Top"  Click="cmdExpand_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Image x:Name="imageNav" Source="{StaticResource expandImageSrc}" Height="32" />
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                </Trigger>
                                <MultiTrigger>
                                    <MultiTrigger.Conditions>
                                        <Condition Property="IsEnabled" Value="true" />
                                        <Condition Property="IsMouseOver" Value="true" />
                                    </MultiTrigger.Conditions>
                                    <MultiTrigger.Setters>
                                        <Setter TargetName="imageNav" Property="Source" Value="{StaticResource expandImageSelectedSrc}" />
                                    </MultiTrigger.Setters>
                                </MultiTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <StackPanel x:Name="panNavigationVert" Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" DockPanel.Dock="Bottom">

                    <Button x:Name="cmdImageNavigationBeginVert" Click="cmdImageNavigationBegin_Click" Margin="2">
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Image x:Name="imageNav" Source="{StaticResource navFirstImageSrc}" Height="24" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="false">
                                        <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                    </Trigger>
                                    <MultiTrigger>
                                        <MultiTrigger.Conditions>
                                            <Condition Property="IsEnabled" Value="true" />
                                            <Condition Property="IsMouseOver" Value="true" />
                                        </MultiTrigger.Conditions>
                                        <MultiTrigger.Setters>
                                            <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navFirstImageSelectedSrc}" />
                                        </MultiTrigger.Setters>
                                    </MultiTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="cmdImageNavigationPreviousVert" Click="cmdImageNavigationPrevious_Click" Margin="2">
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Image x:Name="imageNav" Source="{StaticResource navPreviousImageSrc}" Height="24" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="false">
                                        <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                    </Trigger>
                                    <MultiTrigger>
                                        <MultiTrigger.Conditions>
                                            <Condition Property="IsEnabled" Value="true" />
                                            <Condition Property="IsMouseOver" Value="true" />
                                        </MultiTrigger.Conditions>
                                        <MultiTrigger.Setters>
                                            <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navPreviousImageSelectedSrc}" />
                                        </MultiTrigger.Setters>
                                    </MultiTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="cmdImageNavigationNextVert" Click="cmdImageNavigationNext_Click" Margin="2">
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Image x:Name="imageNav" Source="{StaticResource navNextImageSrc}" Height="24" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="false">
                                        <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                    </Trigger>
                                    <MultiTrigger>
                                        <MultiTrigger.Conditions>
                                            <Condition Property="IsEnabled" Value="true" />
                                            <Condition Property="IsMouseOver" Value="true" />
                                        </MultiTrigger.Conditions>
                                        <MultiTrigger.Setters>
                                            <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navNextImageSelectedSrc}" />
                                        </MultiTrigger.Setters>
                                    </MultiTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="cmdImageNavigationLastVert" Click="cmdImageNavigationLast_Click" Margin="2">
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Image x:Name="imageNav" Source="{StaticResource navLastImageSrc}" Height="24" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="false">
                                        <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                    </Trigger>
                                    <MultiTrigger>
                                        <MultiTrigger.Conditions>
                                            <Condition Property="IsEnabled" Value="true" />
                                            <Condition Property="IsMouseOver" Value="true" />
                                        </MultiTrigger.Conditions>
                                        <MultiTrigger.Setters>
                                            <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navLastImageSelectedSrc}" />
                                        </MultiTrigger.Setters>
                                    </MultiTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>

                <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center">

                    <ComboBox x:Name="cmbGallerySectionVert" MinWidth="120"  Margin="0,10,0,0"  Height="26" SelectionChanged="cmbGallerySectionVert_SelectionChanged">
                        <ComboBox.LayoutTransform>
                            <RotateTransform Angle="270" />
                        </ComboBox.LayoutTransform>
                        <ComboBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Vertical" IsItemsHost="True" MinWidth="100">
                                    <StackPanel.LayoutTransform>
                                        <RotateTransform Angle="90" />
                                    </StackPanel.LayoutTransform>
                                </StackPanel>
                            </ItemsPanelTemplate>
                        </ComboBox.ItemsPanel>
                        <!--
                        <ComboBox.ItemContainerStyle>
                            <Style TargetType="ComboBoxItem">
                               
                            <Setter Property="LayoutTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="-90" />
                                </Setter.Value>
                            </Setter>
                            
                                <Setter Property="Padding" Value="5" />
                            </Style>
                        </ComboBox.ItemContainerStyle>
-->
                    </ComboBox>
                    <TextBlock x:Name="lblImageListNameVert" Text="Gallery Name" HorizontalAlignment="Left" Margin="0,20,0,0" Background="Transparent" FontSize="24" >
                        <TextBlock.LayoutTransform>
                            <RotateTransform Angle="-90"></RotateTransform>
                        </TextBlock.LayoutTransform>
                    </TextBlock>

                    <TextBlock x:Name="lblImageViewNameVert" DataContext="{StaticResource imageMainViewerListKey}" Text="{Binding Mode=OneWay, Path=/Meta.Name}" Background="Transparent" FontSize="24"  Margin="0,20,0,0" HorizontalAlignment="Left" Visibility="Collapsed">
                        <TextBlock.LayoutTransform>
                            <RotateTransform Angle="-90"></RotateTransform>
                        </TextBlock.LayoutTransform>
                    </TextBlock>
                </StackPanel>
            </DockPanel>


            <StackPanel  Orientation="Vertical" Grid.Column="1" Grid.Row="0" >
                <DockPanel Margin="12,0,2,0" LastChildFill="True" Background="{StaticResource WallaBannerBackgroundBrush}" VerticalAlignment="Top" >

                    <Button x:Name="cmdContract" DockPanel.Dock="Right" Click="cmdContract_Click" Margin="0,0,4,0">
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Image x:Name="imageNav" Source="{StaticResource contractImageSrc}" Height="32" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsEnabled" Value="false">
                                        <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                    </Trigger>
                                    <MultiTrigger>
                                        <MultiTrigger.Conditions>
                                            <Condition Property="IsEnabled" Value="true" />
                                            <Condition Property="IsMouseOver" Value="true" />
                                        </MultiTrigger.Conditions>
                                        <MultiTrigger.Setters>
                                            <Setter TargetName="imageNav" Property="Source" Value="{StaticResource contractImageSelectedSrc}" />
                                        </MultiTrigger.Setters>
                                    </MultiTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <!-- <Image Source="{StaticResource contractImageSrc}" Height="28" /> -->
                    <Button x:Name="cmdAccount" DockPanel.Dock="Left" Style="{StaticResource styleButton}" Click="cmdAccount_Click" Padding="0" BorderThickness="0">
                        <Button.Template>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Image x:Name="imageContent" Source="{StaticResource accountImageSrc}" SnapsToDevicePixels="True" Height="31" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="imageContent" Property="Source" Value="{StaticResource accountImageSelectedSrc}" />
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="imageContent" Property="Source" Value="{StaticResource accountImageSrc}" />
                                    </Trigger>
                                    <Trigger Property="IsEnabled" Value="False">
                                        <Setter TargetName="imageContent" Property="Opacity" Value="0.7" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Label x:Name="lblFotoWalla" Content="" FontSize="24" VerticalContentAlignment="Center" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Background="Transparent" Foreground="{StaticResource FontBorderBrush}">
                    </Label>
                </DockPanel>

                <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="7" X2="500" Y2="7" StrokeThickness="0.5" Margin="0,5,0,0" />

            </StackPanel>

            <RadioButton x:Name="radGallery"  GroupName="MainSection" Tag="false" Grid.Column="1" Grid.Row="1" Checked="radGallery_Checked" Style="{StaticResource styleMainSectionRadioButton}">
                <RadioButton.Template>
                    <ControlTemplate TargetType="{x:Type RadioButton}">
                        <Grid>
                            <Rectangle x:Name="outerRectangle" StrokeThickness="0">
                                <Rectangle.Fill>
                                    <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background.Color}" Opacity="0.5" />
                                </Rectangle.Fill>
                            </Rectangle>
                            <DockPanel LastChildFill="True" Margin="{TemplateBinding Margin}">
                                <Button x:Name="cmdGalleryRefresh" Tag="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Tag}" Visibility="Collapsed" DockPanel.Dock="Right" Style="{StaticResource styleButton}" Template="{StaticResource templateRefreshButton}" Click="cmdGalleryRefresh_Click" Padding="0" Margin="0" BorderThickness="0" />

                                <Image x:Name="imgGallery" Source="{StaticResource galleryImageSrc}" SnapsToDevicePixels="True" DockPanel.Dock="Left" Height="32" />
                                <Label Content="Gallery" VerticalContentAlignment="Center" Foreground="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type RadioButton}},Path=Foreground}"/>
                            </DockPanel>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Foreground" Value="{StaticResource FontBorderBrush}" />
                                <Setter Property="Background" Value="{StaticResource PaneHeaderBackgroundSelectedBrush}" />
                                <Setter TargetName="imgGallery" Property="Source" Value="{StaticResource galleryImageSelectedSrc}" />
                                <Setter TargetName="cmdGalleryRefresh" Property="Visibility" Value="Visible" />
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="false" />
                                    <Condition Property="IsMouseOver" Value="true" />
                                </MultiTrigger.Conditions>
                                <MultiTrigger.Setters>
                                    <Setter Property="Foreground" Value="{StaticResource FontBorderBrushSelected}" />
                                    <Setter TargetName="imgGallery" Property="Source" Value="{StaticResource galleryImageSelectedSrc}" />
                                </MultiTrigger.Setters>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </RadioButton.Template>
            </RadioButton>

            <DockPanel x:Name="panGalleryUnavailable" Grid.Column="1" Grid.Row="2" VerticalAlignment="Stretch" Background="{StaticResource PaneBodyBackgroundBrush}" Margin="2" Visibility="Collapsed">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="Galleries not loaded..." TextAlignment="Center" />
                </StackPanel>
            </DockPanel>

            <Grid x:Name="gridGallery" Background="{StaticResource PaneBodyBackgroundBrush}" Grid.Column="1" Grid.Row="2"  Margin="8,4,4,4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <!-- wrap galleries -->
                    <RowDefinition Height="48" />
                    <!-- add edit buttons -->
                    <RowDefinition Height="30" />
                    <!-- Name -->
                    <RowDefinition Height="80" />
                    <!-- Desc -->
                    <RowDefinition Height="30" />
                    <!-- Access Type -->
                    <RowDefinition Height="30" />
                    <!-- Password -->
                    <RowDefinition Height="48" />
                    <!-- Save buttons -->
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" HorizontalScrollBarVisibility="Disabled">
                    <WrapPanel x:Name="wrapMyGalleries" Orientation="Horizontal">
                    </WrapPanel>
                </ScrollViewer>

                <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2">
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,10,0,4" />
                    <StackPanel Orientation="Horizontal" >
                        <Button x:Name="cmdGalleryView" Content="View" ToolTip="Open Gallery in your Browser" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGalleryView_Click"  />
                        <Button x:Name="cmdGalleryCopyUrl" Content="Copy Url" ToolTip="Copy Url to your Clipboard" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGalleryCopyUrl_Click"  />
                        <Button x:Name="cmdGalleryAdd" Content="Add" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGalleryAdd_Click"  />
                        <Button x:Name="cmdGalleryEdit" Content="Edit" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGalleryEdit_Click" />
                    </StackPanel>
                </StackPanel>

                <Label Grid.Column="0" Grid.Row="2" Content="Name"/>
                <TextBox x:Name="txtGalleryName" Margin="2" Grid.Column="1" Grid.Row="2" MaxLines="1" Text="WSSsjnnsde" MaxLength="30" PreviewTextInput="txtCategoryGalleryName_PreviewTextInput" />

                <Label Grid.Column="0" Grid.Row="3" Content="Description"/>
                <TextBox x:Name="txtGalleryDescription" Margin="2" Grid.Column="1" Grid.Row="3" TextWrapping="Wrap" Height="75" VerticalContentAlignment="Top" VerticalScrollBarVisibility="Auto" MaxLines="1" MaxLength="200"/>



                <Label Grid.Column="0" Grid.Row="4" Content="Access Type"/>
                <ComboBox x:Name="cmbGalleryAccessType" SelectedIndex="0"  Margin="2" Grid.Column="1" Grid.Row="4" SelectionChanged="cmbGalleryAccessType_SelectionChanged" Background="{x:Null}">
                    <ComboBoxItem>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image Source="{StaticResource privateImageSrc}"  Height="20" Width="20" />
                            <TextBlock Foreground="{StaticResource FontBorderBrush}" Margin="10,0,0,0">Private</TextBlock>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image Source="{StaticResource sharedSecureImageSrc}"  Height="20" Width="20" />
                            <TextBlock Foreground="{StaticResource FontBorderBrush}" Margin="10,0,0,0">Shared (Password)</TextBlock>
                        </StackPanel>
                    </ComboBoxItem>
                    <ComboBoxItem>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <Image Source="{StaticResource sharedOpenImageSrc}"  Height="20" Width="20" />
                            <TextBlock Foreground="{StaticResource FontBorderBrush}" Margin="10,0,0,0">Public (Complex Url)</TextBlock>
                        </StackPanel>
                    </ComboBoxItem>
                </ComboBox>

                <Label Grid.Column="0" Grid.Row="5" Content="Password"/>
                <TextBox x:Name="txtGalleryPassword" Margin="2" Grid.Column="1" Grid.Row="5" MaxLines="1" MaxLength="30"/>


                <StackPanel Orientation="Vertical" VerticalAlignment="Bottom" Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2">
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,10,0,4" />
                    <StackPanel Orientation="Horizontal"  VerticalAlignment="Bottom">
                        <Button x:Name="cmdGallerySave" Content="Save Edit" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGallerySave_Click" />
                        <Button x:Name="cmdGalleryCancel" Content="Cancel" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGalleryCancel_Click"  />
                        <Button x:Name="cmdGalleryDelete" Content="Delete" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGalleryDelete_Click" />
                    </StackPanel>
                </StackPanel>


            </Grid>

            <RadioButton x:Name="radCategory" GroupName="MainSection" Tag="false" Grid.Column="1" Grid.Row="3" Checked="radCategory_Checked" Style="{StaticResource styleMainSectionRadioButton}">
                <RadioButton.Template>
                    <ControlTemplate TargetType="{x:Type RadioButton}">
                        <Grid>
                            <Rectangle x:Name="outerRectangle" StrokeThickness="0">
                                <Rectangle.Fill>
                                    <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background.Color}" Opacity="0.5" />
                                </Rectangle.Fill>
                            </Rectangle>
                            <DockPanel LastChildFill="True" Margin="{TemplateBinding Margin}">
                                <Button x:Name="cmdCategoryRefresh" Tag="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Tag}" Visibility="Hidden" DockPanel.Dock="Right" Style="{StaticResource styleButton}" Template="{StaticResource templateRefreshButton}" Click="cmdCategoryRefresh_Click" Padding="0" Margin="0" BorderThickness="0" />

                                <Image x:Name="imgCategory" Source="{StaticResource categoryImageSrc}" SnapsToDevicePixels="True" DockPanel.Dock="Left" Height="32" />
                                <Label Content="Category" VerticalContentAlignment="Center" Foreground="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type RadioButton}},Path=Foreground}"/>
                            </DockPanel>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Foreground" Value="{StaticResource FontBorderBrush}" />
                                <Setter Property="Background" Value="{StaticResource PaneHeaderBackgroundSelectedBrush}" />
                                <Setter TargetName="imgCategory" Property="Source" Value="{StaticResource categoryImageSelectedSrc}" />
                                <Setter TargetName="cmdCategoryRefresh" Property="Visibility" Value="Visible" />
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="false" />
                                    <Condition Property="IsMouseOver" Value="true" />
                                </MultiTrigger.Conditions>
                                <MultiTrigger.Setters>
                                    <Setter Property="Foreground" Value="{StaticResource FontBorderBrushSelected}" />
                                    <Setter TargetName="imgCategory" Property="Source" Value="{StaticResource categoryImageSelectedSrc}" />
                                </MultiTrigger.Setters>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </RadioButton.Template>
            </RadioButton>

            <DockPanel x:Name="panCategoryUnavailable" Grid.Column="1" Grid.Row="4" VerticalAlignment="Stretch" Margin="2" Background="{StaticResource PaneBodyBackgroundBrush}">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="Categories not loaded..." TextAlignment="Center" />
                </StackPanel>
            </DockPanel>

            <Grid x:Name="gridCategory" Grid.Column="1" Grid.Row="4" Background="{StaticResource PaneBodyBackgroundBrush}" Margin="8,5,5,5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="48" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="80" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="48" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition MinWidth="100" />
                </Grid.ColumnDefinitions>

                <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Padding="2">
                    <TreeView x:Name="treeCategoryView">
                        <!-- filled out with code behind -->
                    </TreeView>
                </ScrollViewer>

                <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2">
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,10,0,4" />
                    <StackPanel Orientation="Horizontal" >
                        <Button x:Name="cmdCategoryAdd" Content="Add" Click="cmdCategoryAdd_Click" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" />
                        <Button x:Name="cmdCategoryEdit" Content="Edit" Click="cmdCategoryEdit_Click" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" />
                    </StackPanel>
                </StackPanel>

                <Label Grid.Column="0" Grid.Row="2" Content="Name"/>
                <TextBox x:Name="txtCategoryName" Grid.Column="1" Grid.Row="2" MaxLength="30" PreviewTextInput="txtCategoryGalleryName_PreviewTextInput" Margin="2" />
                <Label Grid.Column="0" Grid.Row="3" Content="Description"/>
                <TextBox x:Name="txtCategoryDescription" Grid.Column="1" Grid.Row="3" Height="75" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" VerticalContentAlignment="Top" MaxLines="1" MaxLength="200" Margin="2"/>
                <Label Grid.Column="0" Grid.Row="4" Content="Parent"/>
                <Label x:Name="lblCategoryParentName" Grid.Column="1" Grid.Row="4" />

                <StackPanel Orientation="Vertical" Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2">
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,10,0,4" />
                    <StackPanel Orientation="Horizontal" >
                        <Button x:Name="cmdCategorySave" Content="Save Edit" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdCategorySave_Click" />
                        <Button x:Name="cmdCategoryCancel" Content="Cancel" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdCategoryCancel_Click" />
                        <Button x:Name="cmdCategoryDelete" Content="Delete" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdCategoryDelete_Click" />
                        <Button x:Name="cmdCategoryMoveParent" Content="Move" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdCategoryMoveParent_Click" />
                    </StackPanel>
                </StackPanel>



            </Grid>

            <RadioButton x:Name="radTag" GroupName="MainSection" Tag="False" Grid.Column="1" Grid.Row="5" Checked="radTag_Checked" Style="{StaticResource styleMainSectionRadioButton}">
                <RadioButton.Template>
                    <ControlTemplate TargetType="{x:Type RadioButton}">
                        <Grid>
                            <Rectangle x:Name="outerRectangle" StrokeThickness="0">
                                <Rectangle.Fill>
                                    <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background.Color}" Opacity="0.5" />
                                </Rectangle.Fill>
                            </Rectangle>
                            <DockPanel LastChildFill="True" Margin="{TemplateBinding Margin}">
                                <Button x:Name="cmdTagRefresh" Tag="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Tag}" Visibility="Hidden" DockPanel.Dock="Right" Style="{StaticResource styleButton}" Template="{StaticResource templateRefreshButton}" Click="cmdTagRefresh_Click" Padding="0" Margin="0" BorderThickness="0" />

                                <Image x:Name="imgTag" Source="{StaticResource tagImageSrc}" SnapsToDevicePixels="True" DockPanel.Dock="Left" Height="32" />
                                <Label Content="Tag" VerticalContentAlignment="Center" Foreground="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type RadioButton}},Path=Foreground}"/>
                            </DockPanel>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Foreground" Value="{StaticResource FontBorderBrush}" />
                                <Setter Property="Background" Value="{StaticResource PaneHeaderBackgroundSelectedBrush}" />
                                <Setter TargetName="imgTag" Property="Source" Value="{StaticResource tagImageSelectedSrc}" />
                                <Setter TargetName="cmdTagRefresh" Property="Visibility" Value="Visible" />
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="false" />
                                    <Condition Property="IsMouseOver" Value="true" />
                                </MultiTrigger.Conditions>
                                <MultiTrigger.Setters>
                                    <Setter Property="Foreground" Value="{StaticResource FontBorderBrushSelected}" />
                                    <Setter TargetName="imgTag" Property="Source" Value="{StaticResource tagImageSelectedSrc}" />
                                </MultiTrigger.Setters>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </RadioButton.Template>
            </RadioButton>

            <DockPanel x:Name="panTagUnavailable" Grid.Column="1" Grid.Row="6" VerticalAlignment="Stretch" Background="{StaticResource PaneBodyBackgroundBrush}" Margin="2" Visibility="Collapsed">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="Tags not loaded..." TextAlignment="Center" />
                </StackPanel>
            </DockPanel>

            <Grid x:Name="gridTag" Background="{StaticResource PaneBodyBackgroundBrush}"  Margin="8,5,5,5" Grid.Column="1" Grid.Row="6">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="48" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="80" />
                    <RowDefinition Height="48" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition MinWidth="100" />
                </Grid.ColumnDefinitions>


                <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Orientation="Vertical">
                        <Label x:Name="lblTagProfileNameLabel" Grid.Column="0" Grid.Row="2" Content="User Tags" FontWeight="SemiBold"/>
                        <WrapPanel x:Name="wrapMyTags" Orientation="Horizontal">
                        </WrapPanel>
                        <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,5,0,5" />

                        <Label Grid.Column="0" Grid.Row="2" Content="Auto tags" FontWeight="SemiBold"/>
                        <WrapPanel x:Name="wrapSystemTags" Orientation="Horizontal">
                        </WrapPanel>
                    </StackPanel>
                </ScrollViewer>

                <StackPanel Orientation="Vertical" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2">
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,10,0,4" />
                    <StackPanel Orientation="Horizontal" >
                        <Button x:Name="cmdTagAdd" Content="Add" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdTagAdd_Click"  />
                        <Button x:Name="cmdTagEdit" Content="Edit" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdTagEdit_Click" />
                    </StackPanel>
                </StackPanel>

                <Label Grid.Column="0" Grid.Row="2" Content="Name" FontWeight="SemiBold"/>
                <TextBox x:Name="txtTagName"  Grid.Column="1" Grid.Row="2" Margin="2" MaxLines="1" MaxLength="30" PreviewTextInput="txtTagName_PreviewTextInput"  />
                <Label Grid.Column="0" Grid.Row="3" Content="Description" FontWeight="SemiBold"/>
                <TextBox x:Name="txtTagDescription" Margin="2" Grid.Column="1" Grid.Row="3" TextWrapping="Wrap" Height="75" VerticalContentAlignment="Top" VerticalScrollBarVisibility="Auto" MaxLines="1" MaxLength="200"/>

                <StackPanel Orientation="Vertical" Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2">
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,10,0,4" />
                    <StackPanel Orientation="Horizontal" >
                        <Button x:Name="cmdTagSave" Content="Save Edit" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdTagSave_Click" />
                        <Button x:Name="cmdTagCancel" Content="Cancel" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdTagCancel_Click"  />
                        <Button x:Name="cmdTagDelete" Content="Delete" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdTagDelete_Click" />
                    </StackPanel>
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="1" X2="300" Y2="1" StrokeThickness="0.5" Margin="0,4,0,4" />
                </StackPanel>


            </Grid>

            <RadioButton x:Name="radUpload" GroupName="MainSection" Grid.Column="1" Grid.Row="7" Tag="False"  Checked="radUpload_Checked" Style="{StaticResource styleMainSectionRadioButton}">
                <RadioButton.Template>
                    <ControlTemplate TargetType="{x:Type RadioButton}">
                        <Grid>
                            <Rectangle x:Name="outerRectangle" StrokeThickness="0">
                                <Rectangle.Fill>
                                    <SolidColorBrush Color="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Background.Color}" Opacity="0.5" />
                                </Rectangle.Fill>
                            </Rectangle>
                            <DockPanel LastChildFill="True" Margin="{TemplateBinding Margin}">
                                <Label x:Name="lblUploadProposedImageCount" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" DockPanel.Dock="Right" VerticalContentAlignment="Center">
                                    <Label.Content>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <Binding Path="Count" Source="{StaticResource uploadImagefileListKey}">
                                                    <Binding.StringFormat>{0} Fotos</Binding.StringFormat>
                                                </Binding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </Label.Content>
                                </Label>

                                <Image x:Name="imgUpload" Source="{StaticResource uploadImageSrc}" SnapsToDevicePixels="True" DockPanel.Dock="Left" Height="32" />
                                <Label Content="Upload" VerticalContentAlignment="Center" Foreground="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type RadioButton}},Path=Foreground}"/>
                            </DockPanel>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Foreground" Value="{StaticResource FontBorderBrush}" />
                                <Setter Property="Background" Value="{StaticResource PaneHeaderBackgroundSelectedBrush}" />
                                <Setter TargetName="imgUpload" Property="Source" Value="{StaticResource uploadImageSelectedSrc}" />
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="false" />
                                    <Condition Property="IsMouseOver" Value="true" />
                                </MultiTrigger.Conditions>
                                <MultiTrigger.Setters>
                                    <Setter Property="Foreground" Value="{StaticResource FontBorderBrushSelected}" />
                                    <Setter TargetName="imgUpload" Property="Source" Value="{StaticResource uploadImageSelectedSrc}" />
                                </MultiTrigger.Setters>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </RadioButton.Template>
            </RadioButton>

            <Grid x:Name="grdUploadSettings" Grid.Column="1" Grid.Row="8" DataContext="{StaticResource uploadUIStateKey}" Background="{StaticResource PaneBodyBackgroundBrush}"  Margin="8,5,5,5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <!-- Upload Type -->
                    <RowDefinition Height="5" />
                    <RowDefinition Height="30" />
                    <!-- Auto folder details -->
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <!-- Auto category details -->

                    <RowDefinition Height="40" />
                    <!-- 5 Root category -->
                    <RowDefinition Height="30" />
                    <!-- New Category -->
                    <RowDefinition Height="30" />
                    <!-- New category Name -->
                    <RowDefinition Height="80" />
                    <!-- New category Desc -->
                    <RowDefinition Height="30" />
                    <!-- Map sub Folders -->

                    <RowDefinition Height="*" />
                    <RowDefinition Height="50" />
                    <!-- Buttons -->
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition MinWidth="100" />
                </Grid.ColumnDefinitions>

                <Label x:Name="lblUploadType" Content="Manual Upload" HorizontalAlignment="Center" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" FontWeight="SemiBold"/>
                <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="1" X2="300" Y2="1" StrokeThickness="0.5" Margin="0,2,0,2" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" />

                <Label Content="Auto upload folder" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2" FontWeight="SemiBold" />
                <Label x:Name="lblUploadAutoUploadFolder" Content="{Binding Mode=OneWay, Path=AutoUploadFolderAbbrev}" Grid.Column="0" Grid.Row="3" Grid.ColumnSpan="2" ToolTip="{Binding Mode=OneWay, Path=AutoUploadFolder}" />

                <Label Content="Category" Grid.Column="0" Grid.Row="4" FontWeight="SemiBold" />
                <Label Content="{Binding Mode=OneWay, Path=AutoUploadCategoryName}" Grid.Column="1" Grid.Row="4" />

                <Label Content="Category" Grid.Column="0" Grid.Row="5" FontWeight="SemiBold" />
                <Grid Grid.Column="1" Grid.Row="5" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="65" />
                    </Grid.ColumnDefinitions>
                    <Label x:Name="lblUploadRootCalegory" Content="{Binding Mode=OneWay, Path=RootCategoryName}" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" DockPanel.Dock="Left" />
                    <Button x:Name="cmdUploadChangeCategory" Content="Change" DockPanel.Dock="Right" Grid.Column="1" Grid.Row="0" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUploadChangeCategory_Click" />
                </Grid>

                <Label Content="Add category" Grid.Column="0" Grid.Row="6" FontWeight="SemiBold"/>
                <CheckBox x:Name="chkUploadToNewCategory" Grid.Row="6" Grid.Column="1" HorizontalAlignment="Right" Margin="0,0,20,0" IsChecked="{Binding Mode=TwoWay, Path=UploadToNewCategory}" Checked="chkUploadToNewCategory_Checked" Unchecked="chkUploadToNewCategory_Unchecked" />

                <Label Content="Category Name" Grid.Column="0" Grid.Row="7" FontWeight="SemiBold" />
                <TextBox x:Name="txtUploadCategoryName" Grid.Column="1" Grid.Row="7" MaxLines="1" MaxLength="30" PreviewTextInput="txtCategoryGalleryName_PreviewTextInput" Margin="2" Text="{Binding Mode=TwoWay, Path=CategoryName}"/>

                <Label Content="Description" Grid.Column="0" Grid.Row="8" FontWeight="SemiBold" />
                <TextBox x:Name="txtUploadCatDescription" VerticalContentAlignment="Top" Grid.Column="1" Grid.Row="8" Height="75" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" MaxLines="1" MaxLength="200" Margin="2" Text="{Binding Mode=TwoWay, Path=CategoryDesc}" />

                <Label Content="Create categories from folders" Grid.Column="0" Grid.Row="9" Grid.ColumnSpan="2" ToolTip="Select this option to create or map the sub folders selected with fotowalla categories" FontWeight="SemiBold"/>
                <CheckBox x:Name="chkUploadMapToSubFolders" Grid.Row="9" Grid.Column="1" HorizontalAlignment="Right" Margin="0,0,20,0" IsChecked="{Binding Mode=TwoWay, Path=MapToSubFolders}" VerticalAlignment="Center" />

                <DockPanel Grid.Row="10" Grid.Column="0" Grid.ColumnSpan="2" LastChildFill="True">
                    <TextBlock></TextBlock>
                </DockPanel>

                <StackPanel Orientation="Vertical" Grid.Row="11" Grid.Column="0" Grid.ColumnSpan="2">
                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="1" X2="300" Y2="1" StrokeThickness="0.5" Margin="0,10,0,4" />
                    <StackPanel Orientation="Horizontal">
                        <Button x:Name="cmdUploadAll" Content="Upload" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUploadAll_Click" />
                        <Button x:Name="cmdUploadResumePauseClear" Content="Clear" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUploadResumePauseClear_Click" />
                        <Button x:Name="cmdUploadImportFolder" Content="Add Folder" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUploadImportFolder_Click" />
                        <Button x:Name="cmdUploadImportFiles" Content="Add Images"  Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUploadImportFiles_Click" />
                        <Button x:Name="cmdUploadTurnAutoOff" Content="Turn off auto upload"  Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUploadTurnAutoOff_Click"  />
                    </StackPanel>
                </StackPanel>

            </Grid>

            <Grid x:Name="gridRight" Margin="0,0,0,0" Grid.Column="2" Grid.Row="0" Grid.RowSpan="9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="0"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="0"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" x:Name="panGridRightHeader" Visibility="Collapsed" Orientation="Vertical">
                    <DockPanel Margin="6,0,6,0" Background="{StaticResource WallaBannerBackgroundBrush}" HorizontalAlignment="Stretch" LastChildFill="True">

                        <Line  Stroke="{StaticResource FontBorderBrushSelected}" DockPanel.Dock="Right" X1="1" Y1="0" X2="1" Y2="42" StrokeThickness="0.5" Margin="0" />

                        <Slider x:Name="sldImageSize" DockPanel.Dock="Left" Ticks="1, 2, 3, 4, 5" HorizontalAlignment="Left" VerticalAlignment="Center"
                            Value="130"
                            Delay="500"
                            Interval="10"
                            TickPlacement="BottomRight"
                            Minimum="75"
                            Maximum="300"
                            Width="100" Margin="6" ValueChanged="sldImageSize_ValueChanged"></Slider>

                        <ToggleButton x:Name="cmdShowActionsMenu" DockPanel.Dock="Right" ContextMenuService.IsEnabled="False" IsChecked="{Binding Path=ContextMenu.IsOpen, RelativeSource={RelativeSource Self}, Mode=TwoWay}">
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="imageMenuContent" Source="{StaticResource dropDownMenuImageSrc}" SnapsToDevicePixels="True" Height="28" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="imageMenuContent" Property="Source" Value="{StaticResource dropDownMenuSelectedImageSrc}" />
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="imageMenuContent" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="imageMenuContent" Property="Source" Value="{StaticResource dropDownMenuSelectedImageSrc}" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ToggleButton.Template>

                            <ToggleButton.ContextMenu>
                                <!-- IsOpen="{Binding RelativeSource={RelativeSource Mode=Self}, Path=PlacementTarget.IsChecked}"> -->
                                <ContextMenu x:Name="menuImageActions" Opacity="0.9" StaysOpen="True">

                                    <MenuItem x:Name="cmdShowInlineImageDetail" Header="Show image details" IsCheckable="True" IsChecked="False" Checked="cmdShowInlineImageDetail_CheckedUnChecked" Unchecked="cmdShowInlineImageDetail_CheckedUnChecked">
                                    </MenuItem>

                                    <MenuItem x:Name="cmdMultiSelectionMode" Header="Select images" IsCheckable="True" IsChecked="False" Checked="cmdMultiSelectionMode_Checked" Unchecked="cmdMultiSelectionMode_Unchecked">
                                    </MenuItem>

                                    <Separator />
                                    <MenuItem x:Name="menuTagRemoveFrom" Header="Remove from Tag" Click="TagRemoveImages_Click" ToolTip="Remove images form the current selected tag">

                                    </MenuItem>
                                    <MenuItem x:Name="menuTagAddTo" Header="Add to new Tag"  ToolTip="Add images to a tag" Click="menuTagAddTo_Click">

                                    </MenuItem>
                                    <MenuItem x:Name="menuCategoryMoveImage" Header="Move image to Category" ToolTip="Move images to a different category" Click="menuCategoryMoveImage_Click">

                                    </MenuItem>
                                    <Separator />
                                    <MenuItem Header="Delete Images" Click="DeleteImages_Click" ToolTip="Permanently deletes the selected image from fotowalla">

                                    </MenuItem>
                                    <MenuItem Header="Download Images - Copy (1920px)" ToolTip="Downloads a high quality copy of your original image.  Maximum resultion is 1920px.  Available in the downloads section when complete.">

                                    </MenuItem>
                                    <MenuItem Header="Download Images - Original"  ToolTip="Requests a download of the originals, available in the downloads section when complete." Click="MenuItem_Click">

                                    </MenuItem>
                                </ContextMenu>
                            </ToggleButton.ContextMenu>
                        </ToggleButton>

                        <Line x:Name="lineActionsMenu" Visibility="Visible" DockPanel.Dock="Right" Stroke="{StaticResource FontBorderBrushSelected}" X1="1" Y1="0" X2="1" Y2="42" StrokeThickness="0.5" Margin="6,0,6,0" />

                        <Button x:Name="cmdImageNavigationLast" Click="cmdImageNavigationLast_Click" Margin="2" DockPanel.Dock="Right">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="imageNav" Source="{StaticResource navLastImageSrc}" Height="24" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="IsEnabled" Value="true" />
                                                <Condition Property="IsMouseOver" Value="true" />
                                            </MultiTrigger.Conditions>
                                            <MultiTrigger.Setters>
                                                <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navLastImageSelectedSrc}" />
                                            </MultiTrigger.Setters>
                                        </MultiTrigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button x:Name="cmdImageNavigationNext" Click="cmdImageNavigationNext_Click" Margin="2" DockPanel.Dock="Right">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="imageNav" Source="{StaticResource navNextImageSrc}" Height="24" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="IsEnabled" Value="true" />
                                                <Condition Property="IsMouseOver" Value="true" />
                                            </MultiTrigger.Conditions>
                                            <MultiTrigger.Setters>
                                                <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navNextImageSelectedSrc}" />
                                            </MultiTrigger.Setters>
                                        </MultiTrigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button x:Name="cmdImageNavigationPrevious" Click="cmdImageNavigationPrevious_Click" Margin="2" DockPanel.Dock="Right">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="imageNav" Source="{StaticResource navPreviousImageSrc}" Height="24" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="IsEnabled" Value="true" />
                                                <Condition Property="IsMouseOver" Value="true" />
                                            </MultiTrigger.Conditions>
                                            <MultiTrigger.Setters>
                                                <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navPreviousImageSelectedSrc}" />
                                            </MultiTrigger.Setters>
                                        </MultiTrigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button x:Name="cmdImageNavigationBegin" Click="cmdImageNavigationBegin_Click" Margin="2" DockPanel.Dock="Right">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="imageNav" Source="{StaticResource navFirstImageSrc}" Height="24" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter TargetName="imageNav" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="IsEnabled" Value="true" />
                                                <Condition Property="IsMouseOver" Value="true" />
                                            </MultiTrigger.Conditions>
                                            <MultiTrigger.Setters>
                                                <Setter TargetName="imageNav" Property="Source" Value="{StaticResource navFirstImageSelectedSrc}" />
                                            </MultiTrigger.Setters>
                                        </MultiTrigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>


                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                            <Label x:Name="lblImageListName" Content="..."  Background="Transparent" FontSize="24" />
                            <ComboBox x:Name="cmbGallerySection" Margin="10,0,0,0" Height="26" MinWidth="120" SelectionChanged="cmbGallerySection_SelectionChanged" >

                            </ComboBox>
                        </StackPanel>

                    </DockPanel>

                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="5" X2="2000" Y2="5" StrokeThickness="0.5" Margin="0,5,0,0" />

                </StackPanel>

                <DockPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Visibility="Visible" x:Name="tabGalleryConfiguration" VerticalAlignment="Stretch" Margin="2" LastChildFill="True">

                    <TabControl Background="{StaticResource ImageViewBackgroundBrush}" >

                        <TabItem Header="Display">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="32" />
                                    <RowDefinition Height="230" />
                                    <RowDefinition Height="10" />
                                    <RowDefinition Height="40" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition MinWidth="300"/>
                                    <ColumnDefinition MinWidth="300"/>

                                </Grid.ColumnDefinitions>

                                <Label FontWeight="Bold" Content="Gallery Types" Grid.Column="0" Grid.Row="0" />
                                <Label FontWeight="Bold" Content="Gallery Styles" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Left" />

                                <ListBox  Grid.Column="0" Grid.Row="1"  
                            		    x:Name ="lstGalleryPresentationList" 
                            		    ItemsSource="{Binding Mode=OneWay, Source={StaticResource galleryPresentationListKey}}"
                            		    ScrollViewer.VerticalScrollBarVisibility="Visible"
                                        SelectionMode="Single"
                                        IsSynchronizedWithCurrentItem="True"
                                        Visibility="Visible" SelectionChanged="lstGalleryPresentationList_SelectionChanged">

                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="100" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="100"/>
                                                </Grid.ColumnDefinitions>

                                                <Image x:Name="imageThumb" Source="{Binding PresentationImage.Source}" Grid.Column="0" Grid.Row="0" Margin="4" />

                                                <StackPanel Orientation="Vertical" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="1" Grid.Row="0">
                                                    <TextBlock Text="{Binding Name}" HorizontalAlignment="Center" FontWeight="Bold" Foreground="{StaticResource FontBorderBrush}"/>
                                                    <TextBlock Text="{Binding Desc}" TextWrapping="Wrap" HorizontalAlignment="Left" Margin="6,2,2,2" Foreground="{StaticResource FontBorderBrush}" />
                                                </StackPanel>
                                            </Grid>
                                            <DataTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="true">
                                                    <Setter TargetName="imageThumb" Property="Effect">
                                                        <Setter.Value>
                                                            <ShaderEffectLibrary:BloomEffect BaseIntensity="1" BaseSaturation="1" BloomIntensity="1" BloomSaturation="1" />
                                                        </Setter.Value>
                                                    </Setter>
                                                </Trigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                                <ListBox  Grid.Column="1" Grid.Row="1"  
                            		    x:Name ="lstGalleryStylesList" 
                            		    ItemsSource="{Binding Mode=OneWay, Source={StaticResource galleryStyleListKey}}"
                            		    ScrollViewer.VerticalScrollBarVisibility="Visible"
                                        SelectionMode="Single"
                                        IsSynchronizedWithCurrentItem="True"
                                        Visibility="Visible" SelectionChanged="lstGalleryStylesList_SelectionChanged">

                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="100" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="200"/>
                                                    <ColumnDefinition Width="100"/>
                                                </Grid.ColumnDefinitions>

                                                <Image x:Name="imageThumb" Source="{Binding StyleImage.Source}" Grid.Column="0" Grid.Row="0" Margin="4" />

                                                <StackPanel Orientation="Vertical" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="1" Grid.Row="0">
                                                    <TextBlock Text="{Binding Name}" HorizontalAlignment="Center" FontWeight="Bold" Foreground="{StaticResource FontBorderBrush}"/>
                                                    <TextBlock Text="{Binding Desc}" TextWrapping="Wrap" HorizontalAlignment="Left" Margin="6,2,2,2" Foreground="{StaticResource FontBorderBrush}" />
                                                </StackPanel>
                                            </Grid>
                                            <DataTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="true">
                                                    <Setter TargetName="imageThumb" Property="Effect">
                                                        <Setter.Value>
                                                            <ShaderEffectLibrary:BloomEffect BaseIntensity="1" BaseSaturation="1" BloomIntensity="1" BloomSaturation="1" />
                                                        </Setter.Value>
                                                    </Setter>
                                                </Trigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                                <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="1" X2="2000" Y2="1" StrokeThickness="0.5" Margin="0,2,0,2" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="3" />

                                <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="3">
                                    <Button x:Name="cmdGalleryPreview" Content="Preview" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdGalleryPreview_Click" />
                                    <Label Content="View gallery with example fotos" Margin="10,0,0,0" />
                                </StackPanel>

                                <DockPanel x:Name="paneGalleryPreviewNotLoaded" Grid.Column="0" Grid.Row="4" Grid.ColumnSpan="3" VerticalAlignment="Stretch" Background="{StaticResource PaneBodyBackgroundBrush}" Margin="2" Visibility="Visible">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="preview not loaded..." TextAlignment="Center" />
                                    </StackPanel>
                                </DockPanel>

                                <WebBrowser x:Name="webGalleryPreview" Source="http://www.google.com" Grid.Column="0" Grid.Row="4" Grid.ColumnSpan="3" Visibility="Collapsed" />
                            </Grid>
                        </TabItem>

                        <TabItem Header="Selection">
                            <Grid x:Name="gridGallerySelection">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="40" />
                                    <RowDefinition Height="10" />
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="3*"/>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="3*"/>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="3*"/>
                                </Grid.ColumnDefinitions>

                                <Label Content="Foto selection" Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="4" FontWeight="Bold" ToolTip="Choose how to select fotos shown in the gallery"/>

                                <ListBox Style="{DynamicResource TagListStyle}" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="4"
                            	        x:Name ="lstGallerySelectionOptions" 
                            	        ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                        SelectionMode="Single" 
                                        ItemContainerStyle="{DynamicResource TagListItem}" SelectionChanged="lstGallerySelectionOptions_SelectionChanged">
                                    <ListBoxItem x:Name="itemGallerySelectionCategory" Content="Category" ToolTip="Fotos will be included from selected Categories" Tag="0" IsSelected="True" />
                                    <ListBoxItem x:Name="itemGallerySelectionTag" Content="Tag" ToolTip="Fotos will be included from selected Tags" Tag="1" />
                                    <!--
                                    2 "Fotos will be included when they are present in selected categories AND tags"
                                    3 "Fotos will be included when they are present in either the selected categories OR tags">
                                    -->
                                </ListBox>

                                <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="5" X2="3000" Y2="5" StrokeThickness="0.5" Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="6" />

                                <Label Content="Categories to include" FontWeight="Bold" VerticalContentAlignment="Center" Grid.Column="0" Grid.Row="3" />

                                <ScrollViewer  x:Name="scrollGalleryCategoryInclude" VerticalScrollBarVisibility="Auto" Grid.Column="0" Grid.Row="4" Margin="2,0,0,2" Background="{StaticResource GroupControlBackgroundBrush}" Grid.ColumnSpan="2">
                                    <TreeView x:Name="treeGalleryCategoryView" ItemContainerStyle="{StaticResource styleTreeViewItemWithCombo}">

                                    </TreeView>
                                </ScrollViewer>

                                <Label Content="Tags to include" VerticalContentAlignment="Center" Grid.Column="2" Grid.Row="3" FontWeight="Bold"/>

                                <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="2" Grid.Row="4" Margin="0,0,0,2" HorizontalScrollBarVisibility="Disabled" Background="{StaticResource GroupControlBackgroundBrush}">
                                    <StackPanel Orientation="Vertical">
                                        <ListBox Style="{DynamicResource TagListStyle}" 
                            	        x:Name ="lstGalleryMyTagListInclude" 
                            	        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                        SelectionMode="Multiple" 
                                        ItemContainerStyle="{DynamicResource TagListItem}">
                                        </ListBox>
                                        <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,5,0,5" />

                                        <ListBox Style="{DynamicResource TagListStyle}" 
                            	        x:Name ="lstGallerySystemTagListInclude" 
                            	        ScrollViewer.VerticalScrollBarVisibility="Auto"
                                        SelectionMode="Multiple" 
                                        ItemContainerStyle="{DynamicResource TagListItem}">
                                        </ListBox>
                                    </StackPanel>
                                </ScrollViewer>

                                <Label Content="Tags to exclude" Grid.Column="4" Grid.Row="3" VerticalContentAlignment="Center" FontWeight="Bold" />

                                <ScrollViewer x:Name="scrollGalleryMyTagExclude" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Grid.Column="4" Grid.Row="4" Margin="0,0,2,2" Background="{StaticResource GalleryExcludeBackgroundBrush}">

                                    <StackPanel Orientation="Vertical">

                                        <ListBox Style="{DynamicResource TagListStyle}" 
                            	        x:Name ="lstGalleryMyTagListExclude" 
                            	        ScrollViewer.VerticalScrollBarVisibility="Visible"
                                        SelectionMode="Multiple" 
                                        ItemContainerStyle="{DynamicResource TagListItem}">
                                        </ListBox>
                                        <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0,5,0,5" />

                                        <ListBox Style="{DynamicResource TagListStyle}" 
                            	        x:Name ="lstGallerySystemTagListExclude" 
                            	        ScrollViewer.VerticalScrollBarVisibility="Visible"
                                        SelectionMode="Multiple" 
                                        ItemContainerStyle="{DynamicResource TagListItem}">
                                        </ListBox>
                                    </StackPanel>


                                </ScrollViewer>

                                <!--<ScrollViewer x:Name="scrollGallerySystemTagExclude" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Grid.Column="4" Grid.Row="3" Margin="0,0,2,2">

                            </ScrollViewer>-->
                            </Grid>
                        </TabItem>

                        <TabItem Header="Advanced">

                            <Grid Grid.Column="0" Grid.Row="1" Margin="4">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition MinWidth="300"/>
                                </Grid.ColumnDefinitions>

                                <Label FontWeight="Bold" Content="Show fields" Grid.Column="0" Grid.Row="0" />
                                <Label Content="Gallery name" Grid.Column="0" Grid.Row="1" />
                                <CheckBox x:Name="chkGalleryShowName" Grid.Row="1" Grid.Column="1"  />

                                <Label Content="Gallery Description" Grid.Column="0" Grid.Row="2" />
                                <CheckBox x:Name="chkGalleryShowDesc" Grid.Row="2" Grid.Column="1"  />

                                <Label Content="Image name" Grid.Column="0" Grid.Row="3" />
                                <CheckBox x:Name="chkGalleryShowImageName" Grid.Row="3" Grid.Column="1"  />

                                <Label Content="Image Description" Grid.Column="0" Grid.Row="4" />
                                <CheckBox x:Name="chkGalleryShowImageDesc" Grid.Row="4" Grid.Column="1"  />

                                <Label Content="Image Meta data" Grid.Column="0" Grid.Row="5" />
                                <CheckBox x:Name="chkGalleryShowImageMeta" Grid.Row="5" Grid.Column="1"  />

                                <Label Content="Grouping Description" Grid.Column="0" Grid.Row="6" />
                                <CheckBox x:Name="chkGalleryShowGroupingDesc" Grid.Row="6" Grid.Column="1"  />

                                <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="15" Y1="0" X2="15" Y2="2000" StrokeThickness="0.5"  Grid.Column="2" Grid.Row="0" Grid.RowSpan="8" />

                                <Label Content="Group Fotos" Grid.Column="3" Grid.Row="0" FontWeight="Bold" MouseUp="Label_MouseUp" />

                                <ListBox Style="{DynamicResource TagListStyle}" Grid.Column="3" Grid.Row="1" Grid.RowSpan="2"
                            	        x:Name ="lstGalleryGroupOptions" 
                            	        ScrollViewer.VerticalScrollBarVisibility="Hidden"
                                        SelectionMode="Single" 
                                        ItemContainerStyle="{DynamicResource TagListItem}">
                                    <ListBoxItem x:Name="itemGalleryGroupNoGroup" Content="No Grouping" ToolTip="Fotos will not be grouped" Tag="0" IsSelected="True" />
                                    <ListBoxItem x:Name="itemGalleryGroupCategory" Content="Use Category" ToolTip="Fotos will be displayed within their Category" Tag="1" />
                                    <ListBoxItem x:Name="itemGalleryGroupTag" Content="Use Tag" ToolTip="Fotos will be displayed by their tags" Tag="2" />
                                </ListBox>

                                <Label Content="Groups to be displayed" Grid.Column="3" Grid.Row="3" FontWeight="Bold" MouseUp="Label_MouseUp_1" />

                                <!--
                                <WrapPanel x:Name="wrapGalleryGroupOptions" Orientation="Horizontal" Grid.Column="3" Grid.Row="1">
                                    <RadioButton x:Name="radGalleryGroupNoGroup" GroupName="galleryGroupOptions" Content="No Grouping" 
                                                 Template="{StaticResource templateRadioButton}" Style="{StaticResource styleRadioButton}"
                                                 ToolTip="Fotos will not be grouped" Tag="0"></RadioButton>
                                    
                                    <RadioButton x:Name="radGalleryGroupCategory" GroupName="galleryGroupOptions" Content="Use Category" 
                                                 Template="{StaticResource templateRadioButton}" Style="{StaticResource styleRadioButton}"
                                                 ToolTip="Fotos will be displayed within their Category" Tag="1"></RadioButton>
                                    
                                    <RadioButton x:Name="radGalleryGroupTag" GroupName="galleryGroupOptions" Content="Use Tag" 
                                                 Template="{StaticResource templateRadioButton}" Style="{StaticResource styleRadioButton}"
                                                 ToolTip="Fotos will be displayed by their tags" Tag="2"></RadioButton>
                                </WrapPanel>-->

                                <DataGrid x:Name="datGallerySections" AutoGenerateColumns="False" SelectionUnit="FullRow" Visibility="Visible" 
                                        SelectionMode="Single" CanUserResizeColumns="True" CanUserSortColumns="False" 
                                        CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True" Grid.Column="3" Grid.Row="4" Grid.RowSpan="6"
                                          ItemsSource="{Binding Source={StaticResource gallerySectionListKey}}" RowHeaderWidth="0" BorderThickness="0.5">
                                    <DataGrid.Columns>

                                        <DataGridTemplateColumn Header="Name" Width="100">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding nameOveride, Mode=TwoWay}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <DataGridTemplateColumn Header="Description" Width="*">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding descOveride, Mode=TwoWay}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                    </DataGrid.Columns>
                                </DataGrid>

                            </Grid>


                        </TabItem>

                    </TabControl>
                </DockPanel>

                <ListBox Grid.Column="0" Grid.Row="1" Style="{DynamicResource PhotoListStyle}" 
                            		    x:Name ="lstImageMainViewerList" 
                            		    ItemsSource="{Binding Mode=OneWay, Source={StaticResource imageMainViewerListKey}}"
                            		    ScrollViewer.VerticalScrollBarVisibility="Visible"
                                        SelectionMode="Single"
                                        IsSynchronizedWithCurrentItem="True"
                                        Visibility="Collapsed" 
                                        ItemContainerStyle="{DynamicResource PhotoListItem}"
                                        Margin="2,2,0,0">

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Grid>

                                    <Grid Height="{Binding ElementName=sldImageSize, Path=Value}" Width="{Binding ElementName=sldImageSize, Path=Value}">
                                        <Image x:Name="imageThumbError" Source="{StaticResource errorImageSrc}" Height="32" HorizontalAlignment="Center" VerticalAlignment="Center"
                                               Visibility="{Binding Path=thumbImageLoadState, Converter={StaticResource WallaLoadStateToVisibleConverter}, ConverterParameter='3'}">
                                        </Image>
                                    </Grid>

                                    <Grid Height="{Binding ElementName=sldImageSize, Path=Value}" Width="{Binding ElementName=sldImageSize, Path=Value}">
                                        <Image x:Name="imageThumbLoading" Source="{StaticResource busyImageSrc}" Height="32" HorizontalAlignment="Center" VerticalAlignment="Center"
                                               Visibility="{Binding Path=thumbImageLoadState, Converter={StaticResource WallaLoadStateToVisibleConverter}, ConverterParameter='1'}">
                                        </Image>
                                    </Grid>

                                    <Image x:Name="imageThumb" Source="{Binding thumbnailImage.Source}" Height="{Binding ElementName=sldImageSize, Path=Value}" HorizontalAlignment="Center" VerticalAlignment="Center"
                                            Visibility="{Binding Path=thumbImageLoadState, Converter={StaticResource WallaLoadStateToVisibleConverter}, ConverterParameter='2'}"
                                            MouseMove="Image_MouseMove" MouseUp="Image_MouseUp">
                                    </Image>



                                    <!--
                                    <Grid Height="{Binding ElementName=sldImageSize, Path=Value}" Width="{Binding ElementName=sldImageSize, Path=Value}">
                                        <Image x:Name="imageThumbError" Source="{StaticResource errorImageSrc}" Height="32" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <Image.Visibility>
                                                <Binding  Path="thumbnailImage.thumbImageLoadState" Converter="{StaticResource WallaLoadStateToVisibleConverter}">
                                                    <Binding.ConverterParameter>
                                                        <sys:Int32>3</sys:Int32>
                                                    </Binding.ConverterParameter>
                                                </Binding>
                                            </Image.Visibility>
                                        </Image>
                                    </Grid>
                                    <Grid Height="{Binding ElementName=sldImageSize, Path=Value}" Width="{Binding ElementName=sldImageSize, Path=Value}">
                                        <Image x:Name="imageThumbLoading" Source="{StaticResource busyImageSrc}" Height="32" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <Image.Visibility>
                                                <Binding  Path="thumbnailImage.thumbImageLoadState" Converter="{StaticResource WallaLoadStateToVisibleConverter}">
                                                    <Binding.ConverterParameter>
                                                        <sys:Int32>1</sys:Int32>
                                                    </Binding.ConverterParameter>
                                                </Binding>
                                            </Image.Visibility>
                                        </Image>
                                    </Grid>

                                    <Image x:Name="imageThumb" Source="{Binding thumbnailImage.Source}" MaxHeight="{Binding ElementName=sldImageSize, Path=Value}" MouseMove="Image_MouseMove" MouseUp="Image_MouseUp">
                                        <Image.Visibility>
                                            <Binding  Path="thumbnailImage.thumbImageLoadState" Converter="{StaticResource WallaLoadStateToVisibleConverter}">
                                                <Binding.ConverterParameter>
                                                    <sys:Int32>2</sys:Int32>
                                                </Binding.ConverterParameter>
                                            </Binding>
                                        </Image.Visibility>
                                    </Image>
-->
                                    <StackPanel x:Name="paneSelectedPane" Visibility="{Binding ElementName=cmdMultiSelectionMode, Path=IsChecked, Converter={StaticResource BooleanToVisibilityConverter}}" Margin="5,5,5,5" HorizontalAlignment="Left" VerticalAlignment="Bottom">
                                        <Image x:Name="imageSelected" Visibility="Hidden" Source="{StaticResource imageSelectedSrc}" Height="14" />
                                    </StackPanel>
                                </Grid>
                                <StackPanel Orientation="Vertical" x:Name="imageInlineDetailPane"  Visibility="{Binding ElementName=cmdShowInlineImageDetail, Path=IsChecked, Converter={StaticResource BooleanToVisibilityConverter}}" HorizontalAlignment="Left" VerticalAlignment="Center" Width="140" MouseUp="Image_MouseUp" >
                                    <TextBlock Text="{Binding name}" HorizontalAlignment="Center" Margin="2" Foreground="{StaticResource FontBorderBrush}"/>
                                    <TextBlock Text="{Binding description}" MaxHeight="60" FontWeight="Light" FontSize="12" HorizontalAlignment="Left" TextWrapping="Wrap" Margin="6,2,2,2" Foreground="{StaticResource FontBorderBrush}" />
                                    <TextBlock Text="{Binding shotSummary}" TextWrapping="Wrap" FontWeight="Light" FontSize="12" HorizontalAlignment="Left" Margin="6,2,2,2" Foreground="{StaticResource FontBorderBrush}" />
                                    <TextBlock Text="{Binding fileSummary}" TextWrapping="Wrap" Margin="6,2,2,2" FontSize="12" FontWeight="Light" Foreground="{StaticResource FontBorderBrush}" />

                                    <!--
                                    <Button Visibility="{Binding ElementName=cmdShowInlineImageDetail, Path=IsChecked, Converter={StaticResource BooleanToVisibilityConverter}}"  
                                        Content="View" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}"
                                        Click="ImageView_Click"  />-->
                                </StackPanel>
                            </StackPanel>
                            <DataTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter TargetName="imageThumb" Property="Effect">
                                        <Setter.Value>
                                            <ShaderEffectLibrary:BloomEffect BaseIntensity="1" BaseSaturation="1" BloomIntensity="1" BloomSaturation="1" />
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=IsSelected}" Value="True">
                                    <Setter TargetName="imageSelected" Property="Visibility" Value="Visible" />
                                </DataTrigger>

                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter  TargetName="imageThumb" Property="Effect">
                                        <Setter.Value>
                                            <ShaderEffectLibrary:ContrastAdjustEffect Contrast="0.5"  />
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>

                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>


                <ListBox Grid.Column="0" Grid.Row="1" Style="{DynamicResource PhotoListStyle}" 
                            		    x:Name ="lstUploadImageFileList" 
                            		    ItemsSource="{Binding Mode=OneWay, Source={StaticResource uploadImagefileListKey}}"
                            		    ItemContainerStyle="{DynamicResource UploadPhotoListItem}" 
                            		    SelectedIndex="0"
                            		    ScrollViewer.VerticalScrollBarVisibility="Visible"
                                        SelectionMode="Single"
                                        IsSynchronizedWithCurrentItem="True"
                                        SelectionChanged="lstUploadImageFileList_SelectionChanged"
                                        Visibility="Collapsed" HorizontalContentAlignment="Center">

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Grid>
                                    <Image x:Name="imageThumb" Source="{Binding Image.Source}" MaxHeight="130" />
                                    <StackPanel x:Name="paneSelectedPane" Margin="5,5,5,5" HorizontalAlignment="Left" VerticalAlignment="Bottom">
                                        <Image x:Name="imageSelected" Visibility="Hidden" Source="{StaticResource imageSelectedSrc}" Height="14" />
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                            <DataTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="true">
                                    <Setter TargetName="imageThumb" Property="Effect">
                                        <Setter.Value>
                                            <ShaderEffectLibrary:BloomEffect BaseIntensity="1" BaseSaturation="1" BloomIntensity="1" BloomSaturation="1" />
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=IsSelected}" Value="True">
                                    <Setter TargetName="imageSelected" Property="Visibility" Value="Visible" />
                                </DataTrigger>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter  TargetName="imageThumb" Property="Effect">
                                        <Setter.Value>
                                            <ShaderEffectLibrary:ContrastAdjustEffect Contrast="0.5"  />
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>

                <DockPanel x:Name="panUpload" Grid.Column="1" Grid.Row="1" Background="{StaticResource PaneBodyBackgroundBrush}" Visibility="Collapsed">
                    <Grid x:Name="grdUploadImageDetails" DataContext="{StaticResource uploadImagefileListKey}">
                        <Grid.RowDefinitions>
                            <!-- File name, name, desc, -->
                            <RowDefinition Height="22"/>
                            <RowDefinition Height="22"/>
                            <RowDefinition Height="0"/>
                            <RowDefinition Height="30" />
                            <RowDefinition Height="80" />

                            <!-- Spacer -->
                            <RowDefinition Height="10"/>

                            <!-- Date -->
                            <RowDefinition Height="30" />
                            <RowDefinition Height="0" />
                            <RowDefinition Height="30" />

                            <!-- Spacer -->
                            <RowDefinition Height="10"/>

                            <!-- Tags -->
                            <RowDefinition Height="30" />
                            <RowDefinition Height="*" />

                            <!-- Spacer -->
                            <RowDefinition Height="10" />

                            <!-- Additional Fields -->
                            <RowDefinition Height="0" />
                            <RowDefinition Height="34" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="170"/>
                            <ColumnDefinition Width="20"/>
                        </Grid.ColumnDefinitions>

                        <Line Grid.Column="0" Grid.Row="0" Grid.RowSpan="18" Stroke="{StaticResource FontBorderBrushSelected}" X1="2.5" Y1="0" X2="2.5" Y2="3000" StrokeThickness="0.5" Margin="0" />

                        <Label Grid.Column="1" Grid.Row="0" Content="File" FontWeight="SemiBold" />
                        <Label x:Name="lblUploadImageFileName" Grid.Column="2" Grid.Row="0" Grid.ColumnSpan="2" Content="{Binding Mode=OneWay, Path=/Meta.OriginalFileName}" />

                        <Label Grid.Column="2" Grid.Row="1" Grid.ColumnSpan="2">
                            <Label.Content>
                                <TextBlock VerticalAlignment="Center" Foreground="{StaticResource FontBorderBrush}">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="Format: {0} Size: {1}">
                                            <Binding Path="/Meta.Format" />
                                            <Binding Path="/Meta.Size" Converter="{StaticResource WallaByteToMBConverterKey}" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </Label.Content>
                        </Label>

                        <Label Grid.Column="2" Grid.Row="2" Grid.ColumnSpan="2" >
                            <Label.Content>
                                <TextBlock VerticalAlignment="Center" Foreground="{StaticResource FontBorderBrush}">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="Width: {0} Height: {1}">
                                            <Binding Path="/Meta.Width" />
                                            <Binding Path="/Meta.Height" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </Label.Content>
                        </Label>

                        <Label Grid.Column="1" Grid.Row="3" Content="Name" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtUploadImageName" Grid.Column="2" Grid.Row="3" Grid.ColumnSpan="2" MaxLines="1" MaxLength="20" Margin="2" Text="{Binding Mode=TwoWay, Path=/Meta.Name}"/>

                        <Label Grid.Column="1" Grid.Row="4" Content="Desc" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtUploadImageDescription" Grid.Column="2" Grid.Row="4" Grid.ColumnSpan="2" TextWrapping="Wrap" Margin="2" Text="{Binding Mode=TwoWay, Path=/Meta.Desc}" MaxLines="3" MaxLength="100"/>

                        <Line Grid.Column="1" Grid.Row="5" Grid.ColumnSpan="3" Stroke="{StaticResource FontBorderBrushSelected}" X1="4" Y1="4" X2="400" Y2="4" StrokeThickness="0.5" Margin="0" />

                        <Label Grid.Column="1" Grid.Row="6" VerticalAlignment="Top" Grid.RowSpan="2" Content="Date" FontWeight="SemiBold"/>

                        <Label Content="Override date"  Grid.Column="2" Grid.Row="6" HorizontalAlignment="Right" ToolTip="Fotowalla will try to determine the most likely date the image was taken.  You can override this logic by adding a date here."></Label>
                        <CheckBox x:Name="chkUploadOverrideDate" Grid.Column="3" Grid.Row="6"  IsChecked="{Binding Mode=TwoWay, Path=/Meta.TakenDateSet}" Checked="chkUploadOverrideDate_Checked" Unchecked="chkUploadOverrideDate_Unchecked" />

                        <Label x:Name="lblUploadOverrideDateAll" Content="Apply to all"  Grid.Column="2" Grid.Row="7" HorizontalAlignment="Right" ToolTip="Check this so every foto you are uploading has the same date"></Label>
                        <CheckBox x:Name="chkUploadOverrideDateAll" Grid.Column="3" Grid.Row="7"  IsChecked="{Binding Source={StaticResource uploadUIStateKey}, Mode=TwoWay, Path=MetaTakenDateSetAll}" Checked="chkUploadOverrideDateAll_Checked" Unchecked="chkUploadOverrideDateAll_Checked"  />

                        <DatePicker x:Name="datUploadOverrideDate" IsEnabled="False" Grid.Column="2" Grid.Row="8" Margin="2" FontSize="16" SelectedDate="{Binding Mode=TwoWay, Path=/Meta.TakenDate}" Grid.ColumnSpan="2" />

                        <Line Grid.Column="1" Grid.Row="9" Grid.ColumnSpan="3" Stroke="{StaticResource FontBorderBrushSelected}" X1="4" Y1="4" X2="400" Y2="4" StrokeThickness="0.5" Margin="0" />

                        <Label Grid.Column="1" Grid.Row="10" Content="Tags" FontWeight="SemiBold"/>
                        <Label Content="Apply to all"  Grid.Column="2" Grid.Row="10" HorizontalAlignment="Right" ToolTip="Check this so the same Tags are associated with every Foto"></Label>

                        <CheckBox x:Name="chkUploadTagsAll" Grid.Column="3" Grid.Row="10"  IsChecked="{Binding Source={StaticResource uploadUIStateKey}, Mode=TwoWay, Path=MetaTagRefAll}" Checked="chkUploadTagsAll_Checked" />

                        <ScrollViewer CanContentScroll="True" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Grid.Column="1" Grid.Row="11" Grid.ColumnSpan="3">
                            <ListBox Style="{DynamicResource TagListStyle}" 
                            		        x:Name ="lstUploadTagList" 
                            		        ScrollViewer.VerticalScrollBarVisibility="Visible"
                                            SelectionMode="Multiple" 
                                            ItemContainerStyle="{DynamicResource TagListItem}" SelectionChanged="lstUploadTagList_SelectionChanged" >
                            </ListBox>
                        </ScrollViewer>

                        <Line Grid.Column="1" Grid.Row="12" Grid.ColumnSpan="2" Stroke="{StaticResource FontBorderBrushSelected}" X1="4" Y1="4" X2="300" Y2="4" StrokeThickness="0.5" Margin="0" />

                        <ScrollViewer CanContentScroll="True" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Disabled" Grid.Column="1" Grid.Row="13" Grid.ColumnSpan="3">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition x:Name="rowUploadUdfChar1" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfChar2" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfChar3" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfText1" Height="80" />
                                    <RowDefinition x:Name="rowUploadUdfNum1" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfNum2" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfNum3" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfDate1" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfDate2" Height="30" />
                                    <RowDefinition x:Name="rowUploadUdfDate3" Height="30" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="0"/>
                                </Grid.ColumnDefinitions>

                                <Label x:Name="lblUdfChar1" Grid.Column="0" Grid.Row="0" Content="User Field 1"/>
                                <TextBox x:Name="txtUploadUdfChar1" Grid.Column="1" Grid.Row="0" MaxLines="1" MaxLength="20" Margin="2" Text="{Binding Mode=TwoWay, Path=/Meta.UdfChar1}" Grid.ColumnSpan="2"/>
                                <CheckBox x:Name="chkUploadUdfChar1All" Grid.Column="2" Grid.Row="0"  Checked="chkUploadUdfChar1All_Checked" Unchecked="chkUploadUdfChar1All_Unchecked" Margin="3,6" />

                                <Label x:Name="lblUdfChar2" Grid.Column="0" Grid.Row="1" Content="User Field 2"/>
                                <TextBox x:Name="txtUploadUdfChar2" Grid.Column="1" Grid.Row="1" MaxLines="1" MaxLength="20" Margin="2" Text="{Binding Mode=TwoWay, Path=/Meta.UdfChar2}" Grid.ColumnSpan="2"/>
                                <CheckBox x:Name="chkUploadUdfChar2All" Grid.Column="2" Grid.Row="1"  Checked="chkUploadUdfChar2All_Checked" Unchecked="chkUploadUdfChar2All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfChar3" Grid.Column="0" Grid.Row="2" Content="User Field 3"/>
                                <TextBox x:Name="txtUploadUdfChar3" Grid.Column="1" Grid.Row="2" MaxLines="1" MaxLength="20" Margin="2" Text="{Binding Mode=TwoWay, Path=/Meta.UdfChar3}" Grid.ColumnSpan="2"/>
                                <CheckBox x:Name="chkUploadUdfChar3All" Grid.Column="2" Grid.Row="2"  Checked="chkUploadUdfChar3All_Checked" Unchecked="chkUploadUdfChar3All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfText1" Grid.Column="0" Grid.Row="3" Content="User Text"/>
                                <TextBox x:Name="txtUploadUdfText1" Grid.Column="1" Grid.Row="3" Margin="2" ScrollViewer.VerticalScrollBarVisibility="Auto" MaxLines="3" MaxLength="500" TextWrapping="Wrap" Text="{Binding Mode=TwoWay, Path=/Meta.UdfText1}" Grid.ColumnSpan="2"/>
                                <CheckBox x:Name="chkUploadUdfText1All" Grid.Column="2" Grid.Row="3"  Checked="chkUploadUdfText1All_Checked" Unchecked="chkUploadUdfText1All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfNum1" Grid.Column="0" Grid.Row="4" Content="User Num 1"/>
                                <TextBox x:Name="txtUploadUdfNum1" Grid.Column="1" Grid.Row="4" Margin="2" MaxLines="1" MaxLength="20" Text="{Binding Mode=TwoWay, Path=/Meta.UdfNum1}" Grid.ColumnSpan="2"/>
                                <CheckBox x:Name="chkUploadUdfNum1All" Grid.Column="2" Grid.Row="4"  Checked="chkUploadUdfNum1All_Checked" Unchecked="chkUploadUdfNum1All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfNum2" Grid.Column="0" Grid.Row="5" Content="User Num 2"/>
                                <TextBox x:Name="txtUploadUdfNum2" Grid.Column="1" Grid.Row="5" Margin="2" MaxLines="1" MaxLength="20" Text="{Binding Mode=TwoWay, Path=/Meta.UdfNum2}" Grid.ColumnSpan="2"/>
                                <CheckBox x:Name="chkUploadUdfNum2All" Grid.Column="2" Grid.Row="5"  Checked="chkUploadUdfNum2All_Checked" Unchecked="chkUploadUdfNum2All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfNum3" Grid.Column="0" Grid.Row="6" Content="User Num 3"/>
                                <TextBox x:Name="txtUploadUdfNum3" Grid.Column="1" Grid.Row="6" Margin="2" MaxLines="1" MaxLength="20" Text="{Binding Mode=TwoWay, Path=/Meta.UdfNum3}" Grid.ColumnSpan="2"/>
                                <CheckBox x:Name="chkUploadUdfNum3All" Grid.Column="2" Grid.Row="6"  Checked="chkUploadUdfNum3All_Checked" Unchecked="chkUploadUdfNum3All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfDate1" Grid.Column="0" Grid.Row="7" Content="User Date 1"/>
                                <DatePicker x:Name="datUploadUdfDate1" Grid.Column="1" Grid.Row="7" Margin="2" SelectedDate="{Binding Mode=TwoWay, Path=/Meta.UdfDate1}" Grid.ColumnSpan="2" />
                                <CheckBox x:Name="chkUploadUdfDate1All" Grid.Column="2" Grid.Row="7"  Checked="chkUploadUdfDate1All_Checked" Unchecked="chkUploadUdfDate1All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfDate2" Grid.Column="0" Grid.Row="8" Content="User Date 2"/>
                                <DatePicker x:Name="datUploadUdfDate2" Grid.Column="1" Grid.Row="8" Margin="2" SelectedDate="{Binding Mode=TwoWay, Path=/Meta.UdfDate2}" Grid.ColumnSpan="2" />
                                <CheckBox x:Name="chkUploadUdfDate2All" Grid.Column="2" Grid.Row="8"  Checked="chkUploadUdfDate2All_Checked" Unchecked="chkUploadUdfDate2All_Unchecked" Margin="3,6"/>

                                <Label x:Name="lblUdfDate3" Grid.Column="0" Grid.Row="9" Content="User Date 3"/>
                                <DatePicker x:Name="datUploadUdfDate3" Grid.Column="1" Grid.Row="9" Margin="2" SelectedDate="{Binding Mode=TwoWay, Path=/Meta.UdfDate3}" Grid.ColumnSpan="2" />
                                <CheckBox x:Name="chkUploadUdfDate3All" Grid.Column="3" Grid.Row="9"  Checked="chkUploadUdfDate3All_Checked" Unchecked="chkUploadUdfDate3All_Unchecked" Margin="3,6"/>
                            </Grid>
                        </ScrollViewer>
                        <!--<Button x:Name="cmdUploadResetMeta" Content="Reset all image info" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUploadResetMeta_Click" Grid.Column="1" Grid.Row="10" Grid.ColumnSpan="3" HorizontalAlignment="Right" />-->
                        <Button x:Name="cmdUploadRemoveImage" Content="Remove Image" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Grid.Column="1" Grid.Row="14" Grid.ColumnSpan="3" HorizontalAlignment="Right" Click="cmdUploadRemoveImage_Click" />
                    </Grid>
                </DockPanel>

                <Grid x:Name="grdImageView" Grid.Column="0" Grid.Row="1" Visibility="Visible" Margin="0" Background="{StaticResource ImageViewBackgroundBrush}" DataContext="{StaticResource imageMainViewerListKey}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="32"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="240"/>
                    </Grid.ColumnDefinitions>

                    <Image Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Margin="0" 
                           Visibility="{Binding Path=/mainImageLoadState, Converter={StaticResource WallaLoadStateToVisibleConverter}, ConverterParameter='2'}" 
                           Source="{Binding mainCopyImage.Source}" MouseUp="RevertFromImageView_MouseUp" HorizontalAlignment="Center" VerticalAlignment="Center">
                    </Image>

                    <Grid Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Margin="0">
                        <Image Source="{StaticResource errorImageSrc}" Height="32"  
                               Visibility="{Binding Path=/mainImageLoadState, Converter={StaticResource WallaLoadStateToVisibleConverter}, ConverterParameter='3'}" 
                               HorizontalAlignment="Center" VerticalAlignment="Center">
                        </Image>
                    </Grid>

                    <Grid Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" Margin="0">
                        <Image Source="{StaticResource busyImageSrc}"
                               Visibility="{Binding Path=/mainImageLoadState, Converter={StaticResource WallaLoadStateToVisibleConverter}, ConverterParameter='1'}" 
                               Height="32" HorizontalAlignment="Center" VerticalAlignment="Center">
                        </Image>
                    </Grid>

                    <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Center">

                        <Button x:Name="cmdImageViewPrevious" Opacity="0.8" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="ImageViewPrevious_Click" Padding="0" Margin="2" BorderThickness="0">
                            <Button.Content>
                                <Image Source="{StaticResource navPreviousImageSrc}" Height="24" />
                            </Button.Content>
                        </Button>

                        <ToggleButton x:Name="cmdImageViewDetailToggle" Opacity="0.8" IsChecked="False" Style="{StaticResource styleToggleButton}" Checked="ImageViewDetails_Click" Unchecked="ImageViewDetails_Click" Padding="0" Margin="2" BorderThickness="0" >
                            <ToggleButton.Template>
                                <ControlTemplate TargetType="ToggleButton">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="imageMenuContent" Source="{StaticResource dropDownMenuImageSrc}" SnapsToDevicePixels="True" Height="28" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsChecked" Value="True">
                                            <Setter TargetName="imageMenuContent" Property="Source" Value="{StaticResource dropDownMenuSelectedImageSrc}" />
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="imageMenuContent" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </ToggleButton.Template>
                        </ToggleButton>

                        <Button x:Name="cmdImageViewNext" Opacity="0.8" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="ImageViewNext_Click" Padding="0" Margin="2" BorderThickness="0">
                            <Button.Content>
                                <Image Source="{StaticResource navNextImageSrc}" Height="24" />
                            </Button.Content>
                        </Button>

                    </StackPanel>

                    <Grid x:Name="grdImageViewDetails" DataContext="{StaticResource imageMainViewerListKey}" Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" Margin="2" HorizontalAlignment="Left" Background="{StaticResource PaneBodyBackgroundBrush}">
                        <Grid.RowDefinitions>
                            <!-- Name, desc, file name, date -->
                            <RowDefinition Height="30" />
                            <RowDefinition Height="80" />
                            <RowDefinition Height="30" />
                            <RowDefinition Height="22" />

                            <!-- Spacer -->
                            <RowDefinition Height="10"/>

                            <!-- Camera maker, model -->
                            <RowDefinition Height="22" />
                            <RowDefinition Height="22" />
                            <RowDefinition Height="22" />
                            <RowDefinition Height="22" />
                            <RowDefinition Height="22" />
                            <RowDefinition Height="22" />
                            <RowDefinition Height="22" />
                            <RowDefinition Height="22" />
                            <!-- 12 -->

                            <!-- Spacer -->
                            <RowDefinition Height="10"/>

                            <!-- Tags -->
                            <RowDefinition Height="22" />
                            <RowDefinition Height="*" />

                            <!-- Spacer -->
                            <RowDefinition Height="10"/>

                            <!-- Buttons -->
                            <RowDefinition Height="48" />

                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5" />
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition MinWidth="170" />
                        </Grid.ColumnDefinitions>

                        <Line Grid.Column="0" Grid.Row="0" Grid.RowSpan="18" Stroke="{StaticResource FontBorderBrushSelected}" X1="2" Y1="0" X2="2" Y2="3000" StrokeThickness="0.5" Margin="0" />

                        <Label Grid.Column="1" Grid.Row="0" Content="Name" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtImageViewName" Grid.Column="2" Grid.Row="0" MaxLines="1" MaxLength="20" Margin="2" Text="{Binding Mode=TwoWay, Path=/Meta.Name}"/>

                        <Label Grid.Column="1" Grid.Row="1" Content="Desc" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtImageViewDescription" Grid.Column="2" Grid.Row="1" TextWrapping="Wrap"  Margin="2" Text="{Binding Mode=TwoWay, Path=/Meta.Desc}" MaxLines="3" MaxLength="100" VerticalScrollBarVisibility="Visible"/>

                        <Label Grid.Column="1" Grid.Row="2" Content="Date" FontWeight="SemiBold">
                            <Label.ToolTip>
                                <TextBlock TextWrapping="Wrap">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}Date Taken: {0:d}{3}File Date: {1:d}{3}Upload Date: {2:d}">
                                            <Binding Path="/Meta.TakenDateMeta" />
                                            <Binding Path="/Meta.TakenDateFile" />
                                            <Binding Path="/Meta.UploadDate"  />
                                            <Binding Source="{x:Static sys:Environment.NewLine}"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </Label.ToolTip>
                        </Label>
                        <DatePicker x:Name="datImageViewDate" Grid.Column="2" Grid.Row="2" Margin="2" SelectedDate="{Binding Mode=TwoWay, Path=/Meta.TakenDate}" Grid.ColumnSpan="2">
                            <DatePicker.ToolTip>
                                <TextBlock TextWrapping="Wrap">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}Date Taken Meta: {0:d}{3}File Date: {1:d}{3}Upload Date: {2:d}">
                                            <Binding Path="/Meta.TakenDateMeta" />
                                            <Binding Path="/Meta.TakenDateFile" />
                                            <Binding Path="/Meta.UploadDate"  />
                                            <Binding Source="{x:Static sys:Environment.NewLine}"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </DatePicker.ToolTip>
                        </DatePicker>

                        <Label Grid.Column="1" Grid.Row="3" Content="File" FontWeight="SemiBold"/>
                        <Label x:Name="lblImageViewFileName" Grid.Column="3" Grid.Row="3" Content="{Binding Mode=OneWay, Path=/Meta.OriginalFileName}" />

                        <Line Grid.Column="1" Grid.Row="4" Grid.ColumnSpan="2" Stroke="{StaticResource FontBorderBrushSelected}" X1="4" Y1="4" X2="300" Y2="4" StrokeThickness="0.5" Margin="0" />

                        <Label Content="Camera" Grid.Column="1" Grid.Row="5" FontWeight="SemiBold"/>
                        <Label Grid.Column="2" Grid.Row="5" VerticalAlignment="Center" Content="{Binding Mode=OneWay, Path=/Meta.CameraMaker}" />

                        <Label Content="Model" Grid.Column="1" Grid.Row="6" FontWeight="SemiBold" />
                        <Label Grid.Column="2" Grid.Row="6" VerticalAlignment="Center" Content="{Binding Mode=OneWay, Path=/Meta.CameraModel}" />

                        <Label Content="Format" Grid.Column="1" Grid.Row="7" FontWeight="SemiBold"/>
                        <Label x:Name="lblImageViewFormat" Grid.Column="2" Grid.Row="7" Content="{Binding Mode=OneWay, Path=/Meta.Format}" />

                        <Label Content="Size" Grid.Column="1" Grid.Row="8" FontWeight="SemiBold"/>
                        <Label x:Name="lblImageViewSize" Grid.Column="2" Grid.Row="8" Content="{Binding Mode=OneWay, Path=/Meta.Size, Converter={StaticResource WallaByteToMBConverterKey}}" />

                        <Label Content="Pixels" Grid.Column="1" Grid.Row="9" FontWeight="SemiBold" />
                        <TextBlock Grid.Column="2" Grid.Row="9" VerticalAlignment="Center" Foreground="{StaticResource FontBorderBrush}">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="Width: {0} Height: {1}">
                                    <Binding Path="/Meta.Width" />
                                    <Binding Path="/Meta.Height" />
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>

                        <Label Content="Aperture" Grid.Column="1" Grid.Row="10" FontWeight="SemiBold"/>
                        <Label x:Name="lblImageViewAperture" Grid.Column="2" Grid.Row="10" Content="{Binding Mode=OneWay, Path=/Meta.Aperture}" />

                        <Label Content="ISO" Grid.Column="1" Grid.Row="11" FontWeight="SemiBold"/>
                        <Label x:Name="lblImageViewISO" Grid.Column="2" Grid.Row="11" Content="{Binding Mode=OneWay, Path=/Meta.ISO}" />

                        <Label Content="Shutter" Grid.Column="1" Grid.Row="12" FontWeight="SemiBold"/>
                        <Label x:Name="lblImageViewShutter" Grid.Column="2" Grid.Row="12" Content="{Binding Mode=OneWay, Path=/Meta.ShutterSpeed}" />

                        <Line Grid.Column="1" Grid.Row="13" Grid.ColumnSpan="2" Stroke="{StaticResource FontBorderBrushSelected}" X1="4" Y1="4" X2="300" Y2="4" StrokeThickness="0.5" Margin="0" />

                        <Label Content="Tags" Grid.Column="1" Grid.Row="14" FontWeight="SemiBold"/>
                        <ScrollViewer CanContentScroll="True" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Grid.Column="1" Grid.Row="15" Grid.ColumnSpan="2">
                            <ListBox Style="{DynamicResource TagListStyle}" 
                            		        x:Name ="lstImageViewTagList" 
                            		        ScrollViewer.VerticalScrollBarVisibility="Visible"
                                            SelectionMode="Multiple" 
                                            ItemContainerStyle="{DynamicResource TagListItem}">
                            </ListBox>

                        </ScrollViewer>

                        <Line Grid.Column="1" Grid.Row="16" Grid.ColumnSpan="2" Stroke="{StaticResource FontBorderBrushSelected}" X1="4" Y1="4" X2="300" Y2="4" StrokeThickness="0.5" Margin="0" />

                        <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="17" Grid.ColumnSpan="2" HorizontalAlignment="Right">
                            <Button x:Name="cmdImageViewEdit" Content="Edit" Opacity="100" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="ImageViewEditSave_Click" />
                            <Button x:Name="cmdImageViewCancel" Content="Cancel"  Opacity="100" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="ImageViewEditCancel_Click" />
                        </StackPanel>
                    </Grid>

                </Grid>

            </Grid>

            <Grid x:Name="gridAccount" Margin="12,0,10,0" Grid.Column="3" Grid.Row="0" Grid.RowSpan="9">
                <Grid.RowDefinitions>
                    <RowDefinition Height="60"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Grid.Row="0" Orientation="Vertical">

                    <DockPanel LastChildFill="True">
                        <Button x:Name="cmdAccountFotoWallaClose" DockPanel.Dock="Left" Style="{StaticResource styleButton}" Padding="0" BorderThickness="0" Click="cmdAccountClose_Click" >
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="imageContent" Source="{StaticResource accountImageSelectedSrc}" SnapsToDevicePixels="True" Height="31" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="imageContent" Property="Source" Value="{StaticResource accountImageSrc}" />
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter TargetName="imageContent" Property="Source" Value="{StaticResource accountImageSelectedSrc}" />
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="imageContent" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button x:Name="cmdAccountClose" VerticalAlignment="Center" DockPanel.Dock="Right" Padding="0" Margin="2" BorderThickness="0" Click="cmdAccountClose_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Image x:Name="accountCloseImage" Source="{StaticResource accountCloseImageSrc}" Height="32" />
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter TargetName="accountCloseImage" Property="Opacity" Value="0.7" />
                                        </Trigger>
                                        <MultiTrigger>
                                            <MultiTrigger.Conditions>
                                                <Condition Property="IsEnabled" Value="true" />
                                                <Condition Property="IsMouseOver" Value="true" />
                                            </MultiTrigger.Conditions>
                                            <MultiTrigger.Setters>
                                                <Setter TargetName="accountCloseImage" Property="Source" Value="{StaticResource accountCloseSelectedImageSrc}" />
                                            </MultiTrigger.Setters>
                                        </MultiTrigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        <Button x:Name="cmdAccountRefresh" DockPanel.Dock="Right" Tag="false" VerticalAlignment="Center" Height="32" Padding="0" Margin="2" Style="{StaticResource styleButton}" Template="{StaticResource templateRefreshButton}" BorderThickness="0" Click="cmdAccountRefresh_Click" />
                        <Line Visibility="Visible" DockPanel.Dock="Right" Stroke="{StaticResource FontBorderBrushSelected}" X1="1" Y1="0" X2="1" Y2="42" StrokeThickness="0.5" Margin="6,0,6,0" />

                        <Label Content="Account info"  Background="Transparent" FontSize="24" HorizontalAlignment="Center" />
                    </DockPanel>

                    <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="5" X2="2000" Y2="5" StrokeThickness="0.5" Margin="0,8,0,0" />
                </StackPanel>

                <DockPanel x:Name="panAccount" Grid.Column="0" Grid.Row="1" VerticalAlignment="Stretch" Margin="2">
                    <TabControl x:Name="tabAccount" Margin="4" SelectionChanged="tabAccount_SelectionChanged">
                        <TabItem x:Name="tabAccountSettings" Header="Account Details" >

                            <Grid x:Name="gridAccountSettings" Background="{StaticResource PaneBodyBackgroundBrush}">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="40" />
                                    <RowDefinition Height="120" />
                                    <RowDefinition Height="40" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="34" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="300" />
                                    <ColumnDefinition Width="10" />
                                    <ColumnDefinition Width="330" />
                                </Grid.ColumnDefinitions>

                                <Label Content="Account" FontWeight="SemiBold" FontSize="24" VerticalContentAlignment="Center" Grid.Column="0" Grid.Row="0" />

                                <Label Content="Account Status" FontSize="24" FontWeight="SemiBold" VerticalContentAlignment="Center" HorizontalAlignment="Left" Grid.Column="2" Grid.Row="0" />

                                <Line Stroke="{StaticResource FontBorderBrushSelected}" X1="5" Y1="10" X2="5" Y2="2000" StrokeThickness="0.5" Margin="0" Grid.Column="1" Grid.Row="0" Grid.RowSpan="5" />

                                <Grid Background="{StaticResource PaneBodyBackgroundBrush}" Grid.Column="0" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="30" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100" />
                                        <ColumnDefinition Width="200" />
                                    </Grid.ColumnDefinitions>

                                    <Label Grid.Column="0" Grid.Row="0" Content="Profile Name" FontWeight="SemiBold"/>
                                    <TextBox x:Name="txtAccountProfileName" Grid.Column="1" Grid.Row="0" MaxLength="100" Margin="2" />

                                    <Label Grid.Column="0" Grid.Row="1" Content="Password" FontWeight="SemiBold"/>
                                    <PasswordBox x:Name="txtAccountPassword" Grid.Column="1" Grid.Row="1" MaxLength="20" Margin="2" />

                                    <Label Grid.Column="0" Grid.Row="2" Content="Email Address" FontWeight="SemiBold"/>
                                    <Label x:Name="lblAccountEmail" Grid.Column="1" Grid.Row="2" />

                                </Grid>

                                <Grid Background="{StaticResource PaneBodyBackgroundBrush}" Grid.Column="2" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="30" />
                                        <RowDefinition Height="30" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100" />
                                        <ColumnDefinition Width="200" />
                                    </Grid.ColumnDefinitions>
                                    <Label Grid.Column="0" Grid.Row="0" Content="Account Type" FontWeight="SemiBold"/>
                                    <Label x:Name="lblAccountType" Grid.Column="1" Grid.Row="0" />

                                    <Label Grid.Column="0" Grid.Row="1" Content="Account Open" FontWeight="SemiBold"/>
                                    <Label x:Name="lblAccountOpen" Grid.Column="1" Grid.Row="1" />

                                    <Label Grid.Column="0" Grid.Row="2" Content="Storage Limit" FontWeight="SemiBold"/>
                                    <Label x:Name="lblAccountStorageLimitGB" Grid.Column="1" Grid.Row="2" />

                                    <Label Grid.Column="0" Grid.Row="3" Content="Current Storage" FontWeight="SemiBold"/>
                                    <Label x:Name="lblAccountCurrentUtil" Grid.Column="1" Grid.Row="3" />
                                </Grid>

                                <Label Content="Application Settings" FontSize="24" FontWeight="SemiBold" VerticalContentAlignment="Center" Grid.Column="2" Grid.Row="2" />

                                <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" Grid.Column="2" Grid.Row="3">
                                    <Grid Background="{StaticResource PaneBodyBackgroundBrush}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="34" />
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="34" />
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                            <RowDefinition Height="30" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="100" />
                                            <ColumnDefinition Width="200" />
                                        </Grid.ColumnDefinitions>

                                        <Label Grid.Column="0" Grid.Row="0" Content="Auto Upload" FontWeight="SemiBold"/>
                                        <CheckBox x:Name="chkAccountAutoUpload" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Right" Margin="0,0,20,0" VerticalAlignment="Center" />

                                        <Label Grid.Column="0" Grid.Row="1" Content="Auto Upload Folder" Grid.ColumnSpan="2" FontWeight="SemiBold"/>
                                        <Button x:Name="cmdAccountChangeAutoUploadFolder" HorizontalAlignment="Right" Content="Change" Grid.Column="1" Grid.Row="1" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdAccountChangeAutoUploadFolder_Click" />

                                        <Label x:Name="lblAccountAutoUploadFolder" Visibility="Collapsed" Content="..." Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2" HorizontalAlignment="Left" />
                                        <Label x:Name="lblAccountAutoUploadFolderAbbrev" Content="..." Grid.Column="0" Grid.Row="2" Grid.ColumnSpan="2" HorizontalAlignment="Left" />

                                        <Label Grid.Column="0" Grid.Row="3" Grid.ColumnSpan="2" Content="Image Copy Folder" FontWeight="SemiBold"/>
                                        <Button x:Name="cmdAccountChangeImageCopyFolder" Content="Change"  HorizontalAlignment="Right" Grid.Column="1" Grid.Row="3" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdAccountChangeImageCopyFolder_Click" />

                                        <Label x:Name="lblAccountImageCopyFolder" Visibility="Collapsed" Content="..." Grid.Column="0" Grid.Row="4" Grid.ColumnSpan="2" HorizontalAlignment="Left" />
                                        <Label x:Name="lblAccountImageCopyFolderAbbrev" Content="..." Grid.Column="0" Grid.Row="4" Grid.ColumnSpan="2" HorizontalAlignment="Left" />

                                        <Label Grid.Column="0" Grid.Row="5" Content="Copies Saved" FontWeight="SemiBold" />
                                        <Label x:Name="lblAccountImageCopyStatus" Grid.Column="1" Grid.Row="5" Content="..." HorizontalAlignment="Right"/>

                                        <Label Grid.Column="0" Grid.Row="6" Content="Max Size" FontWeight="SemiBold" />
                                        <Grid Grid.Column="1" Grid.Row="6" HorizontalAlignment="Right">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="50" />
                                            </Grid.ColumnDefinitions>

                                            <Slider x:Name="sldAccountImageCopySize" Grid.Column="0" Grid.Row="0" Ticks="1, 2, 3, 4, 5" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                    Value="250"
                                                    Delay="500"
                                                    Interval="10"
                                                    TickPlacement="BottomRight"
                                                    Minimum="0"
                                                    Maximum="500"
                                                    Width="100"></Slider>
                                            <Label Content="{Binding ElementName=sldAccountImageCopySize, Path=Value, Converter={StaticResource WallaCacheSizeConverterKey}}" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" />
                                        </Grid>
                                    </Grid>
                                </ScrollViewer>

                                <StackPanel Orientation="Horizontal" Grid.Row="4" Grid.Column="0" >
                                    <Button x:Name="cmdAccountLogin" Content="Login" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdAccountLogin_Click" />
                                    <Button x:Name="cmdUseOffline" Content="Use Offline" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}"  />
                                    <Button x:Name="cmdAccountUpdateOnWeb" Content="Update Profile" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" />
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" Grid.Row="4" Grid.Column="2">
                                    <Button x:Name="cmdUserAppEdit" Content="Edit" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUserAppEdit_Click" />
                                    <Button x:Name="cmdUserAppSave" Content="Save" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUserAppSave_Click" />
                                    <Button x:Name="cmdUserAppCancel" Content="Cancel" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdUserAppCancel_Click" />
                                </StackPanel>

                                <!-- <Button x:Name="cmdAccountClose" Content="Close" Style="{StaticResource styleButton}" Template="{StaticResource templateButton}" Click="cmdAccountClose_Click" /> -->
                            </Grid>
                        </TabItem>

                        <TabItem x:Name="tabUploadStatusList" Header="Upload Status" >
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <DataGrid x:Name="datUploadsInProgress" AutoGenerateColumns="False" SelectionUnit="FullRow" Visibility="Visible" 
                                        SelectionMode="Single" CanUserResizeColumns="True" CanUserSortColumns="True" 
                                        CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True" Grid.Column="0" Grid.Row="0" 
                                          ItemsSource="{Binding Mode=OneWay, Source={StaticResource uploadImageStateListInProgressKey}}" RowHeaderWidth="0" BorderThickness="0.5">
                                    <DataGrid.Columns>

                                        <DataGridTemplateColumn Header="Name" Width="*" IsReadOnly="True">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding name}" ToolTip="{Binding fullPath}" />
                                                    <!--
                                                            <TextBlock.ToolTip>
                                                                <MultiBinding StringFormat="{}File name: {0}{3}Full path: {1}{3}Automatic Upload: {3}">
                                                                    <Binding Path="fileName" />
                                                                    <Binding Path="fullPath" />
                                                                    <Binding Path="isAutoUpload"  />
                                                                    <Binding Source="{x:Static sys:Environment.NewLine}"/>
                                                                </MultiBinding>
                                                        </TextBlock.ToolTip>
                                            -->
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <DataGridTemplateColumn Header="Status" Width="Auto" IsReadOnly="True">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding status, Converter={StaticResource wallaUploadStatusConverterKey}}">
                                                    </TextBlock>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <DataGridTemplateColumn Header="Error" Width="Auto" IsReadOnly="True">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock x:Name="showError" Text="!" HorizontalAlignment="Center" FontWeight="Bold" Visibility="Hidden" ToolTip="{Binding errorMessage}">
                                                    </TextBlock>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding error}" Value="true">
                                                            <Setter TargetName="showError" Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <DataGridTextColumn Header="Last Updated" Binding="{Binding lastUpdated, StringFormat=g}" Width="Auto" IsReadOnly="True" CanUserSort="True" />
                                    </DataGrid.Columns>
                                </DataGrid>

                                <DataGrid x:Name="datUploadCompletedList" AutoGenerateColumns="False" SelectionUnit="FullRow" Visibility="Visible"
                                        SelectionMode="Single" CanUserResizeColumns="True" MinColumnWidth="40" CanUserSortColumns="True" 
                                        CanUserAddRows="False" CanUserDeleteRows="False" IsReadOnly="True" Grid.Column="1" Grid.Row="0" RowHeaderWidth="0">
                                    <DataGrid.ItemsSource>
                                        <Binding Source="{StaticResource uploadImageStateListCompleteKey}" />
                                    </DataGrid.ItemsSource>
                                    <DataGrid.Columns>

                                        <DataGridTemplateColumn Header="Name" Width="*" IsReadOnly="True">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding name}" ToolTip="{Binding fullPath}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <DataGridTemplateColumn Header="Source Machine" Width="auto" IsReadOnly="True">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding machineName}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <DataGridTemplateColumn Header="Error" Width="Auto" IsReadOnly="True" >
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <TextBlock x:Name="showError" Text="!" HorizontalAlignment="Center" FontWeight="Bold" Visibility="Hidden" ToolTip="{Binding errorMessage}">
                                                    </TextBlock>
                                                    <DataTemplate.Triggers>
                                                        <DataTrigger Binding="{Binding error}" Value="true">
                                                            <Setter TargetName="showError" Property="Visibility" Value="Visible" />
                                                        </DataTrigger>
                                                    </DataTemplate.Triggers>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>

                                        <DataGridTextColumn Header="Uploaded" Binding="{Binding uploadDate, StringFormat=d}" Width="Auto" IsReadOnly="True" CanUserSort="True" />
                                    </DataGrid.Columns>
                                </DataGrid>

                                <DockPanel x:Name="panUploadStatusListUnavailable" Grid.Column="0" Grid.Row="0" VerticalAlignment="Stretch" Background="#CC8CFFE5" Margin="2" Visibility="Collapsed">
                                    <TextBlock Text="Upload Status List" TextAlignment="Center" />
                                </DockPanel>

                            </Grid>
                        </TabItem>

                        <TabItem x:Name="tabDownloadList" Header="Downloads" >

                        </TabItem>
                    </TabControl>
                </DockPanel>

            </Grid>
        </Grid>

        <Border x:Name="paneBusy" BorderThickness="0" Panel.ZIndex="990"  Visibility="Collapsed" Opacity="100.0" Background="White" >

        </Border>

        <Grid Panel.ZIndex="999" Opacity="100.0" x:Name="gridAlertDialog" Visibility="Collapsed" Background="{StaticResource AlertBackgroundBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" >
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="4" />
                <RowDefinition MinHeight="80" MaxHeight="350" />
                <RowDefinition Height="4" />
                <RowDefinition Height="40" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300" />
            </Grid.ColumnDefinitions>

            <Rectangle Grid.Column="0" Grid.Row="0" Grid.RowSpan="5" StrokeThickness="2" Stroke="{StaticResource FontBorderBrush}"></Rectangle>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <!-- Source="{DynamicResource busyImageAnimSrc}" -->
                <Image x:Name="imgBusy" Source="{DynamicResource busyImageAnimSrc}" Height="30" />
                <Image x:Name="imgAlert" Source="{StaticResource errorImageSrc}" Height="32" />
                <TextBlock x:Name="lblAlertDialogHeader" TextWrapping="Wrap" Margin="20,0,0,0" Text="Loading.." Foreground="{StaticResource FontBorderBrush}" FontSize="20" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Column="0" Grid.Row="0"/>
            </StackPanel>
            <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0" Grid.Column="0" Grid.Row="1" />

            <ScrollViewer Grid.Column="0" Grid.Row="2" Margin="2" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                <TextBlock x:Name="lblAlertDialogMessage" Margin="5" FontSize="16" TextWrapping="Wrap" HorizontalAlignment="Center" Text="some random message" Foreground="{StaticResource FontBorderBrush}" />
            </ScrollViewer>

            <Line Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0" Grid.Column="0" Grid.Row="3" />
            <Button x:Name="cmdAlertDialogResponse" Grid.Column="0" Grid.Row="4" Content="Cancel" Width="80" Click="cmdAlertDialogResponse_Click"  Template="{StaticResource templateButton}" Style="{StaticResource styleButton}" />

        </Grid>

        <Grid Panel.ZIndex="999" Opacity="100.0" x:Name="gridInfoAlert" Visibility="Collapsed" Background="{StaticResource AlertBackgroundBrush}" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240" />
            </Grid.ColumnDefinitions>

            <Rectangle Grid.Column="0" Grid.Row="0" Grid.RowSpan="3" Stroke="{StaticResource FontBorderBrush}" StrokeThickness="1"></Rectangle>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="0" Grid.Row="0">
                <TextBlock Margin="0,0,0,0" TextWrapping="Wrap" Text="Info alert" FontSize="20" VerticalAlignment="Center" Foreground="{StaticResource FontBorderBrush}"/>
            </StackPanel>
            <TextBlock x:Name="lblInfoDialogMessage" Margin="5" TextWrapping="Wrap" HorizontalAlignment="Center" Text="some random message" Foreground="{StaticResource FontBorderBrush}" Grid.Column="0" Grid.Row="1"/>
        </Grid>

        <Grid Panel.ZIndex="998" Opacity="100.0" x:Name="gridTagSelectDialog" Visibility="Collapsed" Background="{StaticResource AlertBackgroundBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" >
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="4" />
                <RowDefinition Height="300" />
                <RowDefinition Height="4" />
                <RowDefinition Height="40" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300" />
            </Grid.ColumnDefinitions>

            <Rectangle Grid.Column="0" Grid.Row="0" Grid.RowSpan="5" StrokeThickness="1" Stroke="{StaticResource FontBorderBrush}"></Rectangle>

            <TextBlock TextWrapping="Wrap" Text="Select Tag(s)" Foreground="{StaticResource FontBorderBrush}" FontSize="20" VerticalAlignment="Center" HorizontalAlignment="Center" Grid.Column="0" Grid.Row="0"/>
            <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0" Grid.Column="0" Grid.Row="1" />

            <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="0" Grid.Row="2" Margin="2">
                <ListBox Style="{DynamicResource TagListStyle}" 
                            	x:Name ="lstTagAddImagesInclude" 
                                SelectionMode="Multiple" 
                                ItemContainerStyle="{DynamicResource TagListItem}"
                                HorizontalAlignment="Center" Margin="10">
                </ListBox>
            </ScrollViewer>

            <Line Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0" Grid.Column="0" Grid.Row="3" />

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="0" Grid.Row="4">
                <Button x:Name="cmdTagAddImagesTo" Content="Add to tags" Width="80" Template="{StaticResource templateButton}" Style="{StaticResource styleButton}" Click="cmdTagAddImagesTo_Click" />
                <Button x:Name="cmdTagAddImagesCancel" Content="Cancel" Width="80" Template="{StaticResource templateButton}" Style="{StaticResource styleButton}" Click="cmdTagAddImagesCancel_Click" />
            </StackPanel>
        </Grid>

        <Grid Panel.ZIndex="998" Opacity="100.0" x:Name="gridCategorySelectDialog" Visibility="Collapsed" Background="{StaticResource AlertBackgroundBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" >
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="4" />
                <RowDefinition Height="300" />
                <RowDefinition Height="4" />
                <RowDefinition Height="40" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300" />
            </Grid.ColumnDefinitions>

            <Rectangle Grid.Column="0" Grid.Row="0" Grid.RowSpan="5" StrokeThickness="1" Stroke="{StaticResource FontBorderBrush}"></Rectangle>

            <TextBlock TextWrapping="Wrap" Text="Select Category" FontSize="20" VerticalAlignment="Center" Foreground="{StaticResource FontBorderBrush}" HorizontalAlignment="Center" Grid.Column="0" Grid.Row="0"/>
            <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0" Grid.Column="0" Grid.Row="1" />

            <ScrollViewer VerticalScrollBarVisibility="Auto" Grid.Column="0" Grid.Row="2" Margin="2">
                <TreeView x:Name="treeCategorySelect" Margin="10">

                </TreeView>
            </ScrollViewer>

            <Line  Stroke="{StaticResource FontBorderBrushSelected}" X1="0" Y1="2" X2="300" Y2="2" StrokeThickness="0.5" Margin="0" Grid.Column="0" Grid.Row="3" />

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="0" Grid.Row="4">
                <Button x:Name="cmdCategorySelect" Content="Add images" Width="80" Template="{StaticResource templateButton}" Style="{StaticResource styleButton}" Click="cmdCategorySelect_Click" />
                <Button x:Name="cmdCategorySelectCancel" Content="Cancel" Width="80" Template="{StaticResource templateButton}" Style="{StaticResource styleButton}" Click="cmdCategorySelectCancel_Click" />
            </StackPanel>
        </Grid>

        <Grid Panel.ZIndex="998" Opacity="100.0" x:Name="gridGalleryStyleAdvancedDialog" Visibility="Collapsed" Background="{StaticResource AlertBackgroundBrush}" HorizontalAlignment="Center" VerticalAlignment="Center" >



        </Grid>

    </Grid>
</Window>
